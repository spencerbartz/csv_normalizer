  [1m[36m (14.0ms)[0m  [1mDROP DATABASE IF EXISTS `codechallenge_test`[0m
  [1m[35m (0.4ms)[0m  CREATE DATABASE `codechallenge_test` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (327.8ms)[0m  [1mCREATE TABLE `purchasers` (`id` int(11) auto_increment PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (327.2ms)[0m  CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (625.9ms)[0m  [1mCREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) [0m
  [1m[35m (0.4ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (44.1ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170401061100')[0m
  [1m[35m (44.4ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170401055803')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:15:21', '2017-04-01 06:15:21', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:15:21', '2017-04-01 06:15:21', 298486374)[0m
  [1m[35m (51.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------
PurchaserTest: test_the_truth
-----------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:22:02', '2017-04-01 06:22:02', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:22:02', '2017-04-01 06:22:02', 298486374)[0m
  [1m[35m (87.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
PurchaserTest: test_Should_have_a_unique_name
---------------------------------------------
  [1m[36mPurchaser Exists (26.9ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:26:36', '2017-04-01 06:26:36', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:26:36', '2017-04-01 06:26:36', 298486374)[0m
  [1m[35m (107.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
PurchaserTest: test_Should_have_a_unique_name
---------------------------------------------
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-01 06:28:09', '2017-04-01 06:28:09')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (51.6ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:29:14', '2017-04-01 06:29:14', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:29:14', '2017-04-01 06:29:14', 298486374)[0m
  [1m[35m (104.8ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
PurchaserTest: test_Should_have_a_unique_name
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-01 06:29:14', '2017-04-01 06:29:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190964) LIMIT 1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (86.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:42:01', '2017-04-01 06:42:01', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:42:01', '2017-04-01 06:42:01', 298486374)[0m
  [1m[35m (93.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------
PurchaserTest: test_Should_have_a_name
--------------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
PurchaserTest: test_Should_have_a_unique_name
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.7ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-01 06:42:01', '2017-04-01 06:42:01')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190965) LIMIT 1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (52.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:43:07', '2017-04-01 06:43:07', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:43:07', '2017-04-01 06:43:07', 298486374)[0m
  [1m[35m (110.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------
PurchaserTest: test_Should_have_a_name
--------------------------------------
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
PurchaserTest: test_Should_have_a_unique_name
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-01 06:43:25', '2017-04-01 06:43:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.1ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190966) LIMIT 1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (47.9ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:44:57', '2017-04-01 06:44:57', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-01 06:44:57', '2017-04-01 06:44:57', 298486374)[0m
  [1m[35m (89.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
PurchaserTest: test_Should_require_a_unique_name
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-01 06:44:57', '2017-04-01 06:44:57')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190967) LIMIT 1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (64.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
PurchaserTest: test_Should_require_a_name
-----------------------------------------
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (273.8ms)[0m  [1mDROP DATABASE IF EXISTS `codechallenge_test`[0m
  [1m[35m (0.5ms)[0m  CREATE DATABASE `codechallenge_test` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (374.6ms)[0m  [1mCREATE TABLE `items` (`id` int(11) auto_increment PRIMARY KEY, `description` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `price` decimal(8,2)) ENGINE=InnoDB[0m
  [1m[35m (312.5ms)[0m  CREATE TABLE `merchants` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (323.5ms)[0m  [1mCREATE TABLE `purchasers` (`id` int(11) auto_increment PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (302.9ms)[0m  CREATE TABLE `purchases` (`id` int(11) auto_increment PRIMARY KEY, `purchaser_id` int(11), `item_id` int(11), `quantity` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (323.5ms)[0m  [1mCREATE TABLE `sales` (`id` int(11) auto_increment PRIMARY KEY, `merchant_id` int(11), `item_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (366.4ms)[0m  CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (714.6ms)[0m  [1mCREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) [0m
  [1m[35m (0.3ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (57.0ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402034517')[0m
  [1m[35m (44.4ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402034424')
  [1m[36m (44.5ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402031035')[0m
  [1m[35m (44.5ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170401055803')
  [1m[36m (44.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170401061100')[0m
  [1m[35m (44.4ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402031604')
  [1m[36m (44.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402033651')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:15', '2017-04-02 04:38:15', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:15', '2017-04-02 04:38:15', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:15', '2017-04-02 04:38:15', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:15', '2017-04-02 04:38:15', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:15', '2017-04-02 04:38:15', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:15', '2017-04-02 04:38:15', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36m (71.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `items`
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:15', '2017-04-02 04:38:15', 980190962)[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:15', '2017-04-02 04:38:15', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchases`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:15', '2017-04-02 04:38:15', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:15', '2017-04-02 04:38:15', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchasers`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:15', '2017-04-02 04:38:15', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:15', '2017-04-02 04:38:15', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `sales`[0m
  [1m[35m (53.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:15', '2017-04-02 04:38:15', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:15', '2017-04-02 04:38:15', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:15', '2017-04-02 04:38:15', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:15', '2017-04-02 04:38:15', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:15', '2017-04-02 04:38:15', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:15', '2017-04-02 04:38:15', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36m (52.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `items`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:16', '2017-04-02 04:38:16', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:16', '2017-04-02 04:38:16', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchases`[0m
  [1m[35mFixture Insert (1.5ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:16', '2017-04-02 04:38:16', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:16', '2017-04-02 04:38:16', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchasers`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:16', '2017-04-02 04:38:16', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:16', '2017-04-02 04:38:16', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `sales`[0m
  [1m[35m (52.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:16', '2017-04-02 04:38:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:38:16', '2017-04-02 04:38:16', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:16', '2017-04-02 04:38:16', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:38:16', '2017-04-02 04:38:16', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:16', '2017-04-02 04:38:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:38:16', '2017-04-02 04:38:16', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36m (45.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (289.6ms)[0m  [1mDROP DATABASE IF EXISTS `codechallenge_test`[0m
  [1m[35m (0.4ms)[0m  CREATE DATABASE `codechallenge_test` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (551.4ms)[0m  [1mCREATE TABLE `items` (`id` int(11) auto_increment PRIMARY KEY, `description` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `price` decimal(8,2)) ENGINE=InnoDB[0m
  [1m[35m (412.5ms)[0m  CREATE TABLE `merchants` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (367.9ms)[0m  [1mCREATE TABLE `purchasers` (`id` int(11) auto_increment PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (336.3ms)[0m  CREATE TABLE `purchases` (`id` int(11) auto_increment PRIMARY KEY, `purchaser_id` int(11), `item_id` int(11), `quantity` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (379.2ms)[0m  [1mCREATE TABLE `sales` (`id` int(11) auto_increment PRIMARY KEY, `merchant_id` int(11), `item_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (367.4ms)[0m  CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (581.3ms)[0m  [1mCREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) [0m
  [1m[35m (0.3ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (45.4ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402034517')[0m
  [1m[35m (44.4ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402034424')
  [1m[36m (44.7ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402031035')[0m
  [1m[35m (44.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170401055803')
  [1m[36m (44.5ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170401061100')[0m
  [1m[35m (44.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402031604')
  [1m[36m (44.5ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402033651')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:48:04', '2017-04-02 04:48:04', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 04:48:04', '2017-04-02 04:48:04', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:48:04', '2017-04-02 04:48:04', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 04:48:04', '2017-04-02 04:48:04', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:48:04', '2017-04-02 04:48:04', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 04:48:04', '2017-04-02 04:48:04', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 04:48:04', '2017-04-02 04:48:04', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 04:48:04', '2017-04-02 04:48:04', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 04:48:04', '2017-04-02 04:48:04', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 04:48:04', '2017-04-02 04:48:04', 298486374)[0m
  [1m[35m (108.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
PurchaserTest: test_It_should_require_a_name
--------------------------------------------
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaserTest: test_Should_require_a_unique_name
------------------------------------------------
  [1m[35m (25.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (55.8ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 04:48:04', '2017-04-02 04:48:04')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (15.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190963) LIMIT 1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (45.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
MerchantTest: test_It_should_require_a_name
-------------------------------------------
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------
MerchantTest: test_It_should_require_an_address
-----------------------------------------------
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------
MerchantTest: test_Should_require_a_unique_name
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 04:48:04', '2017-04-02 04:48:04')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE (`merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `merchants`.`id` != 980190963) LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE (`merchants`.`address` = BINARY '200 Market Street' AND `merchants`.`id` != 980190963) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE (`merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `merchants`.`id` != 980190963) LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE (`merchants`.`address` = BINARY '200 Market Street' AND `merchants`.`id` != 980190963) LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (55.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (17.3ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 05:00:16', '2017-04-02 05:00:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 05:00:16', '2017-04-02 05:00:16', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 05:00:16', '2017-04-02 05:00:16', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 05:00:16', '2017-04-02 05:00:16', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 05:00:16', '2017-04-02 05:00:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 05:00:16', '2017-04-02 05:00:16', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 05:00:16', '2017-04-02 05:00:16', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 05:00:16', '2017-04-02 05:00:16', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 05:00:16', '2017-04-02 05:00:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 05:00:16', '2017-04-02 05:00:16', 298486374)[0m
  [1m[35m (94.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
MerchantTest: test_Should_require_an_address
--------------------------------------------
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------
MerchantTest: test_Should_require_a_name
----------------------------------------
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-----------------------------------------------
MerchantTest: test_Should_require_a_unique_name
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 05:00:16', '2017-04-02 05:00:16')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE (`merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `merchants`.`id` != 980190964) LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE (`merchants`.`address` = BINARY '200 Market Street' AND `merchants`.`id` != 980190964) LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (51.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_Should_require_a_unique_description_but_not_price
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 05:00:17', '2017-04-02 05:00:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE (`items`.`description` = BINARY 'Samsung TV' AND `items`.`id` != 980190963) LIMIT 1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (43.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
ItemTest: test_Should_require_a_price
-------------------------------------
  [1m[35mItem Exists (0.7ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
ItemTest: test_Should_require_a_description
-------------------------------------------
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaserTest: test_Should_should_require_a_name
------------------------------------------------
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
PurchaserTest: test_Should_require_a_unique_name
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 05:00:17', '2017-04-02 05:00:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190964) LIMIT 1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (41.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 05:00:27', '2017-04-02 05:00:27', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 05:00:27', '2017-04-02 05:00:27', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 05:00:27', '2017-04-02 05:00:27', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 05:00:27', '2017-04-02 05:00:27', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 05:00:27', '2017-04-02 05:00:27', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 05:00:27', '2017-04-02 05:00:27', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 05:00:27', '2017-04-02 05:00:27', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 05:00:27', '2017-04-02 05:00:27', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 05:00:27', '2017-04-02 05:00:27', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 05:00:27', '2017-04-02 05:00:27', 298486374)[0m
  [1m[35m (108.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
MerchantTest: test_Should_require_a_unique_name
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 05:00:27', '2017-04-02 05:00:27')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE (`merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `merchants`.`id` != 980190965) LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE (`merchants`.`address` = BINARY '200 Market Street' AND `merchants`.`id` != 980190965) LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (48.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
MerchantTest: test_Should_require_an_address
--------------------------------------------
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
MerchantTest: test_Should_require_a_name
----------------------------------------
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaserTest: test_Should_require_a_unique_name
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 05:00:27', '2017-04-02 05:00:27')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190965) LIMIT 1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (50.0ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaserTest: test_Should_should_require_a_name
------------------------------------------------
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
ItemTest: test_Should_require_a_description
-------------------------------------------
  [1m[36mItem Exists (7.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_Should_require_a_unique_description_but_not_price
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsudng TV' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsudng TV', '2017-04-02 05:00:28', '2017-04-02 05:00:28')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE (`items`.`description` = BINARY 'Samsudng TV' AND `items`.`id` != 980190964) LIMIT 1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (54.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
ItemTest: test_Should_require_a_price
-------------------------------------
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.4ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (2.0ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 1
  [1m[36m (0.1ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (2.7ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:21:06', '2017-04-02 07:21:06', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:21:06', '2017-04-02 07:21:06', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:21:06', '2017-04-02 07:21:06', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:21:06', '2017-04-02 07:21:06', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:21:06', '2017-04-02 07:21:06', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:21:06', '2017-04-02 07:21:06', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:21:06', '2017-04-02 07:21:06', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:21:06', '2017-04-02 07:21:06', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:21:06', '2017-04-02 07:21:06', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:21:06', '2017-04-02 07:21:06', 298486374)[0m
  [1m[35m (94.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
SaleTest: test_Should_allow_duplicate_entries_as_individual_transactions
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 07:21:06', '2017-04-02 07:21:06')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (46.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
SaleTest: test_Should_require_a_merchant_id
-------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
SaleTest: test_Should_require_an_item_id
----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaseTest: test_Should_require_a_purchaser_id
------------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
PurchaseTest: test_Should_require_a_quantity
--------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaseTest: test_Should_require_an_purchase_id
------------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
MerchantTest: test_Should_require_an_address
--------------------------------------------
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------
MerchantTest: test_Should_require_a_unique_name
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 07:21:06', '2017-04-02 07:21:06')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE (`merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `merchants`.`id` != 980190966) LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE (`merchants`.`address` = BINARY '200 Market Street' AND `merchants`.`id` != 980190966) LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (44.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------
MerchantTest: test_Should_require_a_name
----------------------------------------
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
PurchaserTest: test_Should_require_a_unique_name
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 07:21:06', '2017-04-02 07:21:06')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190966) LIMIT 1[0m
  [1m[35mPurchaser Exists (0.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (45.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
PurchaserTest: test_Should_should_require_a_name
------------------------------------------------
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
ItemTest: test_Should_require_a_description
-------------------------------------------
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------
ItemTest: test_Should_require_a_price
-------------------------------------
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_Should_require_a_unique_description_but_not_price
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 07:21:06', '2017-04-02 07:21:06')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE (`items`.`description` = BINARY 'Samsung TV' AND `items`.`id` != 980190965) LIMIT 1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (46.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (4.1ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:35:17', '2017-04-02 07:35:17', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:35:17', '2017-04-02 07:35:17', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:35:17', '2017-04-02 07:35:17', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:35:17', '2017-04-02 07:35:17', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:35:17', '2017-04-02 07:35:17', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:35:17', '2017-04-02 07:35:17', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:35:17', '2017-04-02 07:35:17', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:35:17', '2017-04-02 07:35:17', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:35:18', '2017-04-02 07:35:18', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:35:18', '2017-04-02 07:35:18', 298486374)[0m
  [1m[35m (105.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
SaleTest: test_Should_allow_duplicate_entries_as_individual_transactions
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 07:35:18', '2017-04-02 07:35:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (56.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
SaleTest: test_Should_require_a_merchant_id
-------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
SaleTest: test_Should_require_an_item_id
----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
ItemTest: test_Should_require_a_price
-------------------------------------
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------
ItemTest: test_Should_require_a_unique_description_but_not_price
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 07:35:18', '2017-04-02 07:35:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE (`items`.`description` = BINARY 'Samsung TV' AND `items`.`id` != 980190966) LIMIT 1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (53.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
ItemTest: test_Should_require_a_description
-------------------------------------------
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
PurchaseTest: test_Should_require_a_quantity
--------------------------------------------
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaseTest: test_Should_require_a_purchaser_id
------------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaseTest: test_Should_require_an_purchase_id
------------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaserTest: test_Should_require_a_unique_name
------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 07:35:18', '2017-04-02 07:35:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.9ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190967) LIMIT 1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (56.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaserTest: test_Should_should_require_a_name
------------------------------------------------
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------
MerchantTest: test_Should_require_a_name
----------------------------------------
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
MerchantTest: test_Should_require_a_unique_name
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 07:35:18', '2017-04-02 07:35:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE (`merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `merchants`.`id` != 980190967) LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE (`merchants`.`address` = BINARY '200 Market Street' AND `merchants`.`id` != 980190967) LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (43.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
MerchantTest: test_Should_require_an_address
--------------------------------------------
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:35:46', '2017-04-02 07:35:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:35:46', '2017-04-02 07:35:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:35:46', '2017-04-02 07:35:46', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:35:46', '2017-04-02 07:35:46', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:35:46', '2017-04-02 07:35:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:35:46', '2017-04-02 07:35:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:35:46', '2017-04-02 07:35:46', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:35:46', '2017-04-02 07:35:46', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:35:46', '2017-04-02 07:35:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:35:46', '2017-04-02 07:35:46', 298486374)[0m
  [1m[35m (98.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------
ItemTest: test_Should_require_a_price
-------------------------------------
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_Should_require_a_unique_description_but_not_price
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 07:35:46', '2017-04-02 07:35:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.0ms)[0m  SELECT  1 AS one FROM `items` WHERE (`items`.`description` = BINARY 'Samsung TV' AND `items`.`id` != 980190967) LIMIT 1
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (50.7ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
-------------------------------------------
ItemTest: test_Should_require_a_description
-------------------------------------------
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
PurchaserTest: test_Should_require_a_unique_name
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 07:35:46', '2017-04-02 07:35:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190968) LIMIT 1[0m
  [1m[35mPurchaser Exists (1.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (51.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
PurchaserTest: test_Should_should_require_a_name
------------------------------------------------
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaseTest: test_Should_require_a_purchaser_id
------------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaseTest: test_Should_require_an_purchase_id
------------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
PurchaseTest: test_Should_require_a_quantity
--------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
MerchantTest: test_Should_require_a_name
----------------------------------------
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
MerchantTest: test_Should_require_an_address
--------------------------------------------
  [1m[35mMerchant Exists (0.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------
MerchantTest: test_Should_require_a_unique_name
-----------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (5.8ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 07:35:46', '2017-04-02 07:35:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE (`merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `merchants`.`id` != 980190968) LIMIT 1[0m
  [1m[35mMerchant Exists (1.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE (`merchants`.`address` = BINARY '200 Market Street' AND `merchants`.`id` != 980190968) LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.8ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (55.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
SaleTest: test_Should_require_a_merchant_id
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
----------------------------------------
SaleTest: test_Should_require_an_item_id
----------------------------------------
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
SaleTest: test_Should_allow_duplicate_entries_as_individual_transactions
------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 07:35:46', '2017-04-02 07:35:46')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (52.7ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (2.7ms)[0m  BEGIN
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:36:16', '2017-04-02 07:36:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:36:16', '2017-04-02 07:36:16', 298486374)[0m
  [1m[35mFixture Delete (2.0ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:36:16', '2017-04-02 07:36:16', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:36:16', '2017-04-02 07:36:16', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:36:16', '2017-04-02 07:36:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:36:16', '2017-04-02 07:36:16', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:36:16', '2017-04-02 07:36:16', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:36:16', '2017-04-02 07:36:16', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:36:16', '2017-04-02 07:36:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:36:16', '2017-04-02 07:36:16', 298486374)[0m
  [1m[35m (97.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
MerchantTest: test_Should_require_an_address
--------------------------------------------
  [1m[36mMerchant Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (3.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (1.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------
MerchantTest: test_Should_require_a_name
----------------------------------------
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
MerchantTest: test_Should_require_a_unique_name
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 07:36:16', '2017-04-02 07:36:16')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (1.1ms)[0m  SELECT  1 AS one FROM `merchants` WHERE (`merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `merchants`.`id` != 980190969) LIMIT 1
  [1m[36mMerchant Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE (`merchants`.`address` = BINARY '200 Market Street' AND `merchants`.`id` != 980190969) LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (50.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
SaleTest: test_Should_require_a_merchant_id
-------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
SaleTest: test_Should_require_an_item_id
----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
SaleTest: test_Should_allow_duplicate_entries_as_individual_transactions
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 07:36:16', '2017-04-02 07:36:16')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (44.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
ItemTest: test_Should_require_a_description
-------------------------------------------
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
ItemTest: test_Should_require_a_price
-------------------------------------
  [1m[35mItem Exists (1.8ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------
ItemTest: test_Should_require_a_unique_description_but_not_price
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 07:36:16', '2017-04-02 07:36:16')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE (`items`.`description` = BINARY 'Samsung TV' AND `items`.`id` != 980190968) LIMIT 1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (47.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
PurchaserTest: test_Should_require_a_unique_name
------------------------------------------------
  [1m[36m (2.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 07:36:16', '2017-04-02 07:36:16')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190969) LIMIT 1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (52.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
PurchaserTest: test_Should_should_require_a_name
------------------------------------------------
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
PurchaseTest: test_Should_require_a_quantity
--------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaseTest: test_Should_require_a_purchaser_id
------------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaseTest: test_Should_require_an_purchase_id
------------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:38:12', '2017-04-02 07:38:12', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 07:38:12', '2017-04-02 07:38:12', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:38:12', '2017-04-02 07:38:12', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 07:38:12', '2017-04-02 07:38:12', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:38:12', '2017-04-02 07:38:12', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 07:38:12', '2017-04-02 07:38:12', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:38:12', '2017-04-02 07:38:12', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 07:38:12', '2017-04-02 07:38:12', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:38:12', '2017-04-02 07:38:12', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 07:38:12', '2017-04-02 07:38:12', 298486374)[0m
  [1m[35m (103.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------
MerchantTest: test_Should_require_a_name
----------------------------------------
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
MerchantTest: test_Should_require_a_unique_name
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 07:38:12', '2017-04-02 07:38:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE (`merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `merchants`.`id` != 980190970) LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE (`merchants`.`address` = BINARY '200 Market Street' AND `merchants`.`id` != 980190970) LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (45.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
MerchantTest: test_Should_require_an_address
--------------------------------------------
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaserTest: test_Should_require_a_unique_name
------------------------------------------------
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 07:38:12', '2017-04-02 07:38:12')
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE (`purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' AND `purchasers`.`id` != 980190970) LIMIT 1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (48.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaserTest: test_Should_should_require_a_name
------------------------------------------------
  [1m[35mPurchaser Exists (0.9ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------
ItemTest: test_Should_require_a_unique_description_but_not_price
----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 07:38:12', '2017-04-02 07:38:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE (`items`.`description` = BINARY 'Samsung TV' AND `items`.`id` != 980190969) LIMIT 1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (42.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
ItemTest: test_Should_require_a_description
-------------------------------------------
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------
ItemTest: test_Should_require_a_price
-------------------------------------
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
SaleTest: test_Should_require_a_merchant_id
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
SaleTest: test_Should_allow_duplicate_entries_as_individual_transactions
------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 07:38:12', '2017-04-02 07:38:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (40.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
SaleTest: test_Should_require_an_item_id
----------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
PurchaseTest: test_Should_require_an_item_id
--------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
PurchaseTest: test_Should_require_a_purchaser_id
------------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
PurchaseTest: test_Should_require_a_quantity
--------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:20:52', '2017-04-02 08:20:52', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:20:52', '2017-04-02 08:20:52', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:20:52', '2017-04-02 08:20:52', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:20:52', '2017-04-02 08:20:52', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:20:52', '2017-04-02 08:20:52', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:20:52', '2017-04-02 08:20:52', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:20:52', '2017-04-02 08:20:52', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:20:52', '2017-04-02 08:20:52', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:20:52', '2017-04-02 08:20:52', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:20:52', '2017-04-02 08:20:52', 298486374)[0m
  [1m[35m (105.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:21:08', '2017-04-02 08:21:08', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:21:08', '2017-04-02 08:21:08', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:21:08', '2017-04-02 08:21:08', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:21:08', '2017-04-02 08:21:08', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:21:08', '2017-04-02 08:21:08', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:21:08', '2017-04-02 08:21:08', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:21:08', '2017-04-02 08:21:08', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:21:08', '2017-04-02 08:21:08', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:21:08', '2017-04-02 08:21:08', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:21:08', '2017-04-02 08:21:08', 298486374)[0m
  [1m[35m (86.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (5.0ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (3.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 08:21:08', '2017-04-02 08:21:08')
  [1m[36m (1.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (48.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.4ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:21:33', '2017-04-02 08:21:33', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:21:33', '2017-04-02 08:21:33', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:21:33', '2017-04-02 08:21:33', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:21:33', '2017-04-02 08:21:33', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:21:33', '2017-04-02 08:21:33', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:21:33', '2017-04-02 08:21:33', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:21:33', '2017-04-02 08:21:33', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:21:33', '2017-04-02 08:21:33', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:21:33', '2017-04-02 08:21:33', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:21:33', '2017-04-02 08:21:33', 298486374)[0m
  [1m[35m (105.7ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------
MerchantTest: test_Should_raise
-------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 08:21:33', '2017-04-02 08:21:33')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (79.5ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (2.9ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (4.2ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (1.4ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:24:28', '2017-04-02 08:24:28', 980190962)
  [1m[36mFixture Insert (1.5ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:24:28', '2017-04-02 08:24:28', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:24:28', '2017-04-02 08:24:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:24:28', '2017-04-02 08:24:28', 298486374)
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:24:28', '2017-04-02 08:24:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:24:28', '2017-04-02 08:24:28', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:24:28', '2017-04-02 08:24:28', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:24:28', '2017-04-02 08:24:28', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:24:29', '2017-04-02 08:24:29', 980190962)
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:24:29', '2017-04-02 08:24:29', 298486374)[0m
  [1m[35m (93.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:24:53', '2017-04-02 08:24:53', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:24:53', '2017-04-02 08:24:53', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:24:53', '2017-04-02 08:24:53', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:24:53', '2017-04-02 08:24:53', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:24:53', '2017-04-02 08:24:53', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:24:53', '2017-04-02 08:24:53', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:24:53', '2017-04-02 08:24:53', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:24:53', '2017-04-02 08:24:53', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:24:53', '2017-04-02 08:24:53', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:24:53', '2017-04-02 08:24:53', 298486374)[0m
  [1m[35m (104.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:33:15', '2017-04-02 08:33:15', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:33:15', '2017-04-02 08:33:15', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:33:15', '2017-04-02 08:33:15', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:33:15', '2017-04-02 08:33:15', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:33:16', '2017-04-02 08:33:16', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:33:16', '2017-04-02 08:33:16', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:33:16', '2017-04-02 08:33:16', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:33:16', '2017-04-02 08:33:16', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:33:16', '2017-04-02 08:33:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:33:16', '2017-04-02 08:33:16', 298486374)[0m
  [1m[35m (94.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (1.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 08:33:16', '2017-04-02 08:33:16')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (46.5ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:34:11', '2017-04-02 08:34:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:34:11', '2017-04-02 08:34:11', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:34:11', '2017-04-02 08:34:11', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:34:11', '2017-04-02 08:34:11', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:34:11', '2017-04-02 08:34:11', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:34:11', '2017-04-02 08:34:11', 298486374)[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:34:11', '2017-04-02 08:34:11', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:34:11', '2017-04-02 08:34:11', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:34:11', '2017-04-02 08:34:11', 980190962)
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:34:11', '2017-04-02 08:34:11', 298486374)[0m
  [1m[35m (103.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 08:34:11', '2017-04-02 08:34:11')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (65.8ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.3ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:34:35', '2017-04-02 08:34:35', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:34:35', '2017-04-02 08:34:35', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:34:35', '2017-04-02 08:34:35', 980190962)[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:34:35', '2017-04-02 08:34:35', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:34:35', '2017-04-02 08:34:35', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:34:35', '2017-04-02 08:34:35', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:34:35', '2017-04-02 08:34:35', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:34:35', '2017-04-02 08:34:35', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:34:36', '2017-04-02 08:34:36', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:34:36', '2017-04-02 08:34:36', 298486374)[0m
  [1m[35m (93.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (4.3ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:39:57', '2017-04-02 08:39:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:39:57', '2017-04-02 08:39:57', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:39:57', '2017-04-02 08:39:57', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:39:57', '2017-04-02 08:39:57', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:39:57', '2017-04-02 08:39:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:39:57', '2017-04-02 08:39:57', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:39:57', '2017-04-02 08:39:57', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:39:57', '2017-04-02 08:39:57', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:39:57', '2017-04-02 08:39:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:39:57', '2017-04-02 08:39:57', 298486374)[0m
  [1m[35m (93.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.2ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:40:22', '2017-04-02 08:40:22', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:40:22', '2017-04-02 08:40:22', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:40:22', '2017-04-02 08:40:22', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:40:22', '2017-04-02 08:40:22', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:40:22', '2017-04-02 08:40:22', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:40:22', '2017-04-02 08:40:22', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:40:22', '2017-04-02 08:40:22', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:40:22', '2017-04-02 08:40:22', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:40:22', '2017-04-02 08:40:22', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:40:22', '2017-04-02 08:40:22', 298486374)[0m
  [1m[35m (96.4ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (3.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  SELECT @@FOREIGN_KEY_CHECKS
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (2.5ms)[0m  [1mDELETE FROM `items`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:40:46', '2017-04-02 08:40:46', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO `items` (`description`, `created_at`, `updated_at`, `id`) VALUES ('MyString', '2017-04-02 08:40:46', '2017-04-02 08:40:46', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM `purchases`
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:40:46', '2017-04-02 08:40:46', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`, `id`) VALUES (1, 1, 1, '2017-04-02 08:40:46', '2017-04-02 08:40:46', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `purchasers`[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:40:46', '2017-04-02 08:40:46', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `purchasers` (`created_at`, `updated_at`, `id`) VALUES ('2017-04-02 08:40:46', '2017-04-02 08:40:46', 298486374)[0m
  [1m[35mFixture Delete (2.2ms)[0m  DELETE FROM `sales`
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:40:46', '2017-04-02 08:40:46', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO `sales` (`merchant_id`, `item_id`, `created_at`, `updated_at`, `id`) VALUES (1, 1, '2017-04-02 08:40:46', '2017-04-02 08:40:46', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM `merchants`[0m
  [1m[35mFixture Insert (2.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:40:46', '2017-04-02 08:40:46', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`, `id`) VALUES ('MyString', 'MyString', '2017-04-02 08:40:46', '2017-04-02 08:40:46', 298486374)[0m
  [1m[35m (90.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------
MerchantTest: test_should_raise
-------------------------------
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (16.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 10:53:38', '2017-04-02 10:53:38')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE (`items`.`description` = BINARY 'Samsung TV' AND `items`.`id` != 980190970) LIMIT 1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (43.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 10:53:47', '2017-04-02 10:53:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE (`items`.`description` = BINARY 'Super Nintendo' AND `items`.`id` != 980190971) LIMIT 1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 10:53:47', '2017-04-02 10:53:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (126.9ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 10:57:35', '2017-04-02 10:57:35')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (119.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 10:57:36', '2017-04-02 10:57:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 10:57:36', '2017-04-02 10:57:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (43.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 10:59:18', '2017-04-02 10:59:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (48.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 10:59:18', '2017-04-02 10:59:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 10:59:18', '2017-04-02 10:59:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (131.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 10:59:18', '2017-04-02 10:59:18')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (47.9ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:01:18', '2017-04-02 11:01:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (49.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:01:18', '2017-04-02 11:01:18')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:01:18', '2017-04-02 11:01:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (133.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (1.7ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:01:38', '2017-04-02 11:01:38')
  [1m[36m (1.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (136.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:01:38', '2017-04-02 11:01:38')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:01:38', '2017-04-02 11:01:38')[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (43.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:01:58', '2017-04-02 11:01:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (45.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:01:58', '2017-04-02 11:01:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:01:58', '2017-04-02 11:01:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (176.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:03:33', '2017-04-02 11:03:33')
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (132.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:03:34', '2017-04-02 11:03:34')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:03:34', '2017-04-02 11:03:34')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (43.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:03:34', '2017-04-02 11:03:34')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (46.7ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:03:58', '2017-04-02 11:03:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (48.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:03:58', '2017-04-02 11:03:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:03:58', '2017-04-02 11:03:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (131.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:03:59', '2017-04-02 11:03:59')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (41.9ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:04:37', '2017-04-02 11:04:37')
  [1m[36m (1.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (46.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:04:37', '2017-04-02 11:04:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.7ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:04:37', '2017-04-02 11:04:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (140.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:04:37', '2017-04-02 11:04:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (43.9ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (1.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:04:56', '2017-04-02 11:04:56')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.7ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (58.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:04:56', '2017-04-02 11:04:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:04:56', '2017-04-02 11:04:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (54.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:04:56', '2017-04-02 11:04:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (50.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:06:59', '2017-04-02 11:06:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (49.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:06:59', '2017-04-02 11:06:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (2.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:06:59', '2017-04-02 11:06:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (129.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:06:59', '2017-04-02 11:06:59')
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (1.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:07:10', '2017-04-02 11:07:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (58.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:07:10', '2017-04-02 11:07:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:07:10', '2017-04-02 11:07:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (54.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:07:10', '2017-04-02 11:07:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.7ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:35:19', '2017-04-02 11:35:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (52.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:35:19', '2017-04-02 11:35:19')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:35:20', '2017-04-02 11:35:20')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (126.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:35:20', '2017-04-02 11:35:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (1.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 11:35:20', '2017-04-02 11:35:20')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (53.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 11:35:20', '2017-04-02 11:35:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (47.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (1.1ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 11:35:20', '2017-04-02 11:35:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (96.8ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:43:16', '2017-04-02 11:43:16')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:43:16', '2017-04-02 11:43:16')[0m
  [1m[35m (1.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (114.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:43:29', '2017-04-02 11:43:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:43:29', '2017-04-02 11:43:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (127.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:45:33', '2017-04-02 11:45:33')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:45:33', '2017-04-02 11:45:33')[0m
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (168.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:46:57', '2017-04-02 11:46:57')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:46:57', '2017-04-02 11:46:57')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (155.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:50:29', '2017-04-02 11:50:29')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (60.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:50:29', '2017-04-02 11:50:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:50:29', '2017-04-02 11:50:29')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (132.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:50:29', '2017-04-02 11:50:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (48.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 11:50:29', '2017-04-02 11:50:29')[0m
  [1m[35m (1.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (44.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 11:50:29', '2017-04-02 11:50:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:50:29', '2017-04-02 11:50:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:50:29', '2017-04-02 11:50:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (130.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.9ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 11:50:29', '2017-04-02 11:50:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (43.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:50:48', '2017-04-02 11:50:48')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (43.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:50:48', '2017-04-02 11:50:48')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:50:48', '2017-04-02 11:50:48')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (44.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:50:48', '2017-04-02 11:50:48')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (40.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 11:50:48', '2017-04-02 11:50:48')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (45.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 11:50:48', '2017-04-02 11:50:48')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (128.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:50:48', '2017-04-02 11:50:48')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:50:48', '2017-04-02 11:50:48')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (130.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 11:50:49', '2017-04-02 11:50:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (41.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 11:50:49', '2017-04-02 11:50:49')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (49.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 11:51:23', '2017-04-02 11:51:23')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (49.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 11:51:23', '2017-04-02 11:51:23')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 11:51:23', '2017-04-02 11:51:23')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (133.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 11:51:23', '2017-04-02 11:51:23')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.8ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 11:51:23', '2017-04-02 11:51:23')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (54.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 11:51:23', '2017-04-02 11:51:23')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:51:23', '2017-04-02 11:51:23')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 11:51:23', '2017-04-02 11:51:23')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (145.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 11:51:24', '2017-04-02 11:51:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 11:51:24', '2017-04-02 11:51:24')[0m
  [1m[35m (2.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (157.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:10:12', '2017-04-02 12:10:12')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (53.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:10:12', '2017-04-02 12:10:12')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:10:12', '2017-04-02 12:10:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (139.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:10:12', '2017-04-02 12:10:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (46.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:10:12', '2017-04-02 12:10:12')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (47.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (1.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (4.9ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:10:12', '2017-04-02 12:10:12')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (45.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:10:12', '2017-04-02 12:10:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.8ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:10:12', '2017-04-02 12:10:12')
  [1m[36m (1.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (160.7ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:10:12', '2017-04-02 12:10:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.7ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (70.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:10:13', '2017-04-02 12:10:13')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (69.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:14:13', '2017-04-02 12:14:13')
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (49.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:14:13', '2017-04-02 12:14:13')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.9ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:14:13', '2017-04-02 12:14:13')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (172.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:14:14', '2017-04-02 12:14:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (48.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:14:14', '2017-04-02 12:14:14')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (47.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:14:14', '2017-04-02 12:14:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:14:14', '2017-04-02 12:14:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:14:14', '2017-04-02 12:14:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (132.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:14:14', '2017-04-02 12:14:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (55.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:14:14', '2017-04-02 12:14:14')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (160.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:17:18', '2017-04-02 12:17:18')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (64.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (1.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:17:18', '2017-04-02 12:17:18')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:17:18', '2017-04-02 12:17:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (124.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:17:18', '2017-04-02 12:17:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (1.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (46.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (2.3ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:17:18', '2017-04-02 12:17:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (45.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:17:18', '2017-04-02 12:17:18')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (48.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:17:18', '2017-04-02 12:17:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:17:18', '2017-04-02 12:17:18')
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (130.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:17:18', '2017-04-02 12:17:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.0ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (41.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:17:18', '2017-04-02 12:17:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (46.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:17:49', '2017-04-02 12:17:49')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (53.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:17:49', '2017-04-02 12:17:49')
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:17:49', '2017-04-02 12:17:49')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (128.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:17:49', '2017-04-02 12:17:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (46.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:17:49', '2017-04-02 12:17:49')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (47.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:17:49', '2017-04-02 12:17:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (2.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (1.9ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (47.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:17:49', '2017-04-02 12:17:49')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:17:49', '2017-04-02 12:17:49')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (140.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.7ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (1.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:17:49', '2017-04-02 12:17:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:17:49', '2017-04-02 12:17:49')[0m
  [1m[35m (3.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (135.7ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:18:12', '2017-04-02 12:18:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (113.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.9ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:18:12', '2017-04-02 12:18:12')
  [1m[36m (1.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:18:12', '2017-04-02 12:18:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (127.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:18:12', '2017-04-02 12:18:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.8ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (46.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (1.1ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:18:12', '2017-04-02 12:18:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (51.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:18:12', '2017-04-02 12:18:12')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:18:12', '2017-04-02 12:18:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:18:12', '2017-04-02 12:18:12')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (130.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:18:13', '2017-04-02 12:18:13')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.0ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:18:13', '2017-04-02 12:18:13')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (48.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (1.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:18:54', '2017-04-02 12:18:54')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (58.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:18:54', '2017-04-02 12:18:54')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:18:54', '2017-04-02 12:18:54')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (130.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:18:55', '2017-04-02 12:18:55')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (45.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:18:55', '2017-04-02 12:18:55')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (50.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:18:55', '2017-04-02 12:18:55')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:18:55', '2017-04-02 12:18:55')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:18:55', '2017-04-02 12:18:55')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (234.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (1.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:18:55', '2017-04-02 12:18:55')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (54.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:18:55', '2017-04-02 12:18:55')[0m
  [1m[35m (3.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (157.5ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (2.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:20:05', '2017-04-02 12:20:05')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (54.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:20:05', '2017-04-02 12:20:05')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (3.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.9ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:20:05', '2017-04-02 12:20:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (203.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:20:05', '2017-04-02 12:20:05')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.9ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (56.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:20:05', '2017-04-02 12:20:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (49.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (1.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:20:06', '2017-04-02 12:20:06')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (41.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:20:06', '2017-04-02 12:20:06')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:20:06', '2017-04-02 12:20:06')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (129.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:20:06', '2017-04-02 12:20:06')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (44.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:20:06', '2017-04-02 12:20:06')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:20:18', '2017-04-02 12:20:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (50.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:20:18', '2017-04-02 12:20:18')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (9.1ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:20:18', '2017-04-02 12:20:18')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (141.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:20:18', '2017-04-02 12:20:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (48.0ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.8ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (1.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:20:18', '2017-04-02 12:20:18')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (57.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:20:18', '2017-04-02 12:20:18')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (1.9ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:20:18', '2017-04-02 12:20:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.5ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:20:18', '2017-04-02 12:20:18')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (156.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (4.0ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:20:18', '2017-04-02 12:20:18')
  [1m[36m (1.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (4.8ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (57.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (3.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:20:18', '2017-04-02 12:20:18')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:21:49', '2017-04-02 12:21:49')
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (61.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:21:49', '2017-04-02 12:21:49')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:21:49', '2017-04-02 12:21:49')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (150.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:21:49', '2017-04-02 12:21:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.7ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (2.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:21:49', '2017-04-02 12:21:49')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (1.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (54.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:21:49', '2017-04-02 12:21:49')
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (15.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (43.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:21:49', '2017-04-02 12:21:49')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:21:49', '2017-04-02 12:21:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (130.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (2.0ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:21:49', '2017-04-02 12:21:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (1.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (2.1ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (3.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (42.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.7ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:21:49', '2017-04-02 12:21:49')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (46.0ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (1.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (3.8ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:22:47', '2017-04-02 12:22:47')
  [1m[36m (1.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (3.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (97.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:22:47', '2017-04-02 12:22:47')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (2.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:22:47', '2017-04-02 12:22:47')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (127.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:22:47', '2017-04-02 12:22:47')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (1.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:22:48', '2017-04-02 12:22:48')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (46.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (2.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (3.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:22:48', '2017-04-02 12:22:48')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.3ms)[0m  ROLLBACK
  [1m[36m (1.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:22:48', '2017-04-02 12:22:48')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:22:48', '2017-04-02 12:22:48')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (152.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (2.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:22:48', '2017-04-02 12:22:48')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:22:48', '2017-04-02 12:22:48')[0m
  [1m[35m (3.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (148.7ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.8ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:23:47', '2017-04-02 12:23:47')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (62.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:23:47', '2017-04-02 12:23:47')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:23:47', '2017-04-02 12:23:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (129.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:23:47', '2017-04-02 12:23:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (46.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:23:47', '2017-04-02 12:23:47')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (41.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (1.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:23:47', '2017-04-02 12:23:47')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.8ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:23:47', '2017-04-02 12:23:47')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:23:47', '2017-04-02 12:23:47')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (134.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:23:48', '2017-04-02 12:23:48')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (2.0ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.0ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:23:48', '2017-04-02 12:23:48')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (49.5ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (3.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (1.1ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:26:29', '2017-04-02 12:26:29')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (103.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:26:29', '2017-04-02 12:26:29')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:26:29', '2017-04-02 12:26:29')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (149.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:26:29', '2017-04-02 12:26:29')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (4.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (54.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:26:29', '2017-04-02 12:26:29')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (46.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (1.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (5.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:26:29', '2017-04-02 12:26:29')
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (41.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:26:29', '2017-04-02 12:26:29')[0m
  [1m[35m (3.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:26:29', '2017-04-02 12:26:29')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (128.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (2.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:26:30', '2017-04-02 12:26:30')
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (8.8ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (48.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:26:30', '2017-04-02 12:26:30')[0m
  [1m[35m (4.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (133.7ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:28:58', '2017-04-02 12:28:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (48.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:28:58', '2017-04-02 12:28:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:28:58', '2017-04-02 12:28:58')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (146.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:28:58', '2017-04-02 12:28:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (58.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:28:58', '2017-04-02 12:28:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (52.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (1.0ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (2.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:28:58', '2017-04-02 12:28:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:28:58', '2017-04-02 12:28:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:28:58', '2017-04-02 12:28:58')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (141.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:28:58', '2017-04-02 12:28:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (39.8ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:28:58', '2017-04-02 12:28:58')[0m
  [1m[35m (2.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (46.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (4.0ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (5.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36mItem Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (3.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:34:50', '2017-04-02 12:34:50')
  [1m[36m (3.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.1ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (51.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:34:50', '2017-04-02 12:34:50')
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (2.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (3.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:34:50', '2017-04-02 12:34:50')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (149.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:34:50', '2017-04-02 12:34:50')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (48.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (18.1ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:34:50', '2017-04-02 12:34:50')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (2.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (51.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:34:50', '2017-04-02 12:34:50')
  [1m[36m (1.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (2.0ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (1.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (58.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:34:50', '2017-04-02 12:34:50')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:34:50', '2017-04-02 12:34:50')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (141.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:34:50', '2017-04-02 12:34:50')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (43.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:34:50', '2017-04-02 12:34:50')[0m
  [1m[35m (3.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (122.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (1.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:35:20', '2017-04-02 12:35:20')
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (58.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:35:20', '2017-04-02 12:35:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.9ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:35:20', '2017-04-02 12:35:20')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (128.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:35:20', '2017-04-02 12:35:20')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (47.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:35:21', '2017-04-02 12:35:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (53.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:35:21', '2017-04-02 12:35:21')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (136.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  ROLLBACK
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:35:21', '2017-04-02 12:35:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:35:21', '2017-04-02 12:35:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (164.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (3.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:35:21', '2017-04-02 12:35:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (52.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:35:21', '2017-04-02 12:35:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mItem Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:38:59', '2017-04-02 12:38:59')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (42.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:38:59', '2017-04-02 12:38:59')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:38:59', '2017-04-02 12:38:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (128.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:38:59', '2017-04-02 12:38:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (43.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (1.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.9ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:38:59', '2017-04-02 12:38:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (1.0ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (53.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:38:59', '2017-04-02 12:38:59')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:38:59', '2017-04-02 12:38:59')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:38:59', '2017-04-02 12:38:59')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (130.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:39:00', '2017-04-02 12:39:00')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (2.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (46.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (4.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:39:00', '2017-04-02 12:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (156.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-02 12:44:01', '2017-04-02 12:44:01')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (63.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-02 12:44:01', '2017-04-02 12:44:01')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (2.0ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (3.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-02 12:44:01', '2017-04-02 12:44:01')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (120.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-02 12:44:01', '2017-04-02 12:44:01')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.8ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (42.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (1.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:44:01', '2017-04-02 12:44:01')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (40.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-02 12:44:02', '2017-04-02 12:44:02')
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (44.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:44:02', '2017-04-02 12:44:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-02 12:44:02', '2017-04-02 12:44:02')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (130.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (1.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (2.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-02 12:44:02', '2017-04-02 12:44:02')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (1.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (47.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-02 12:44:02', '2017-04-02 12:44:02')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (48.5ms)[0m  [1mROLLBACK[0m
  [1m[36m (0.9ms)[0m  [1mDROP DATABASE IF EXISTS `codechallenge_test`[0m
  [1m[35m (0.5ms)[0m  CREATE DATABASE `codechallenge_test` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (359.9ms)[0m  [1mCREATE TABLE `items` (`id` int(11) auto_increment PRIMARY KEY, `description` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `price` decimal(8,2)) ENGINE=InnoDB[0m
  [1m[35m (334.2ms)[0m  CREATE TABLE `merchants` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (412.6ms)[0m  [1mCREATE TABLE `purchasers` (`id` int(11) auto_increment PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (358.6ms)[0m  CREATE TABLE `purchases` (`id` int(11) auto_increment PRIMARY KEY, `purchaser_id` int(11), `item_id` int(11), `quantity` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (290.2ms)[0m  [1mCREATE TABLE `sales` (`id` int(11) auto_increment PRIMARY KEY, `merchant_id` int(11), `item_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (494.6ms)[0m  CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (792.8ms)[0m  [1mCREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) [0m
  [1m[35m (0.3ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (101.2ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402034517')[0m
  [1m[35m (44.5ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402034424')
  [1m[36m (44.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402031035')[0m
  [1m[35m (44.5ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170401055803')
  [1m[36m (44.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170401061100')[0m
  [1m[35m (44.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402031604')
  [1m[36m (44.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402033651')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-03 04:17:26', '2017-04-03 04:17:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (92.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-03 04:17:26', '2017-04-03 04:17:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-03 04:17:26', '2017-04-03 04:17:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (52.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-03 04:17:26', '2017-04-03 04:17:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (104.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-03 04:17:27', '2017-04-03 04:17:27')[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (91.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-03 04:17:27', '2017-04-03 04:17:27')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (151.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (27.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-03 04:17:27', '2017-04-03 04:17:27')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-03 04:17:27', '2017-04-03 04:17:27')
  [1m[36m (1.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (83.0ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-03 04:17:27', '2017-04-03 04:17:27')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (57.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-03 04:17:27', '2017-04-03 04:17:27')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (50.5ms)[0m  [1mROLLBACK[0m
  [1m[36m (10.5ms)[0m  [1mDROP DATABASE IF EXISTS `codechallenge_test`[0m
  [1m[35m (0.4ms)[0m  CREATE DATABASE `codechallenge_test` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (428.0ms)[0m  [1mCREATE TABLE `items` (`id` int(11) auto_increment PRIMARY KEY, `description` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `price` decimal(8,2)) ENGINE=InnoDB[0m
  [1m[35m (423.5ms)[0m  CREATE TABLE `merchants` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (336.4ms)[0m  [1mCREATE TABLE `purchasers` (`id` int(11) auto_increment PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (367.9ms)[0m  CREATE TABLE `purchases` (`id` int(11) auto_increment PRIMARY KEY, `purchaser_id` int(11), `item_id` int(11), `quantity` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (535.0ms)[0m  [1mCREATE TABLE `sales` (`id` int(11) auto_increment PRIMARY KEY, `merchant_id` int(11), `item_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (345.3ms)[0m  CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (773.6ms)[0m  [1mCREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) [0m
  [1m[35m (0.3ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (99.3ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402034517')[0m
  [1m[35m (55.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402034424')
  [1m[36m (55.7ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402031035')[0m
  [1m[35m (55.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170401055803')
  [1m[36m (55.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170401061100')[0m
  [1m[35m (71.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402031604')
  [1m[36m (105.8ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402033651')[0m
  [1m[36mActiveRecord::SchemaMigration Load (10.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mItem Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (14.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (12.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (25.5ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-03 08:07:56', '2017-04-03 08:07:56')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (131.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-03 08:07:56', '2017-04-03 08:07:56')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-03 08:07:56', '2017-04-03 08:07:56')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (47.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (3.5ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-03 08:07:56', '2017-04-03 08:07:56')
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (1.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (92.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (1.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-03 08:07:57', '2017-04-03 08:07:57')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (57.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-03 08:07:57', '2017-04-03 08:07:57')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (2.1ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (1.0ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (123.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-03 08:07:57', '2017-04-03 08:07:57')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-03 08:07:57', '2017-04-03 08:07:57')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (41.8ms)[0m  ROLLBACK
  [1m[36m (2.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-03 08:07:57', '2017-04-03 08:07:57')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-03 08:07:57', '2017-04-03 08:07:57')[0m
  [1m[35m (2.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (47.7ms)[0m  [1mROLLBACK[0m
  [1m[36m (12.8ms)[0m  [1mDROP DATABASE IF EXISTS `codechallenge_test`[0m
  [1m[35m (0.3ms)[0m  CREATE DATABASE `codechallenge_test` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (389.9ms)[0m  [1mCREATE TABLE `items` (`id` int(11) auto_increment PRIMARY KEY, `description` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `price` decimal(8,2)) ENGINE=InnoDB[0m
  [1m[35m (401.5ms)[0m  CREATE TABLE `merchants` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (334.6ms)[0m  [1mCREATE TABLE `purchasers` (`id` int(11) auto_increment PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (314.3ms)[0m  CREATE TABLE `purchases` (`id` int(11) auto_increment PRIMARY KEY, `purchaser_id` int(11), `item_id` int(11), `quantity` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (401.4ms)[0m  [1mCREATE TABLE `sales` (`id` int(11) auto_increment PRIMARY KEY, `merchant_id` int(11), `item_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (413.5ms)[0m  CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (648.0ms)[0m  [1mCREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) [0m
  [1m[35m (0.3ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (44.1ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402034517')[0m
  [1m[35m (46.2ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402034424')
  [1m[36m (44.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402031035')[0m
  [1m[35m (44.5ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170401055803')
  [1m[36m (55.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170401061100')[0m
  [1m[35m (55.8ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402031604')
  [1m[36m (55.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402033651')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (4.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-03 21:07:49', '2017-04-03 21:07:49')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (87.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-03 21:07:50', '2017-04-03 21:07:50')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.8ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-03 21:07:50', '2017-04-03 21:07:50')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (52.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-03 21:07:50', '2017-04-03 21:07:50')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (60.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (22.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (10.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-03 21:07:50', '2017-04-03 21:07:50')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (75.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-03 21:07:50', '2017-04-03 21:07:50')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (151.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-03 21:07:50', '2017-04-03 21:07:50')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-03 21:07:50', '2017-04-03 21:07:50')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (56.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-03 21:07:50', '2017-04-03 21:07:50')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (57.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-03 21:07:50', '2017-04-03 21:07:50')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (50.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 15ms (Views: 14.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (9.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 15ms (Views: 14.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.3ms)
Completed 200 OK in 15ms (Views: 14.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (6.1ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.3ms)
Completed 200 OK in 15ms (Views: 14.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.5ms)
Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 14ms (Views: 13.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.5ms)
Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (12.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.4ms)
Completed 200 OK in 15ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.3ms)
Completed 200 OK in 14ms (Views: 13.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  Rendered uploads/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (13.6ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (949.1ms)
Completed 200 OK in 964ms (Views: 910.6ms | ActiveRecord: 52.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (6.5ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (261.2ms)
Completed 200 OK in 277ms (Views: 250.8ms | ActiveRecord: 26.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (280.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (91.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (30.8ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (501.4ms)
Completed 200 OK in 547ms (Views: 495.4ms | ActiveRecord: 51.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (20.8ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.9ms)
  [1m[36m (1.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (8.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (291.5ms)
Completed 200 OK in 307ms (Views: 278.6ms | ActiveRecord: 28.4ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (15.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (23.0ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (298.1ms)
Completed 200 OK in 313ms (Views: 263.7ms | ActiveRecord: 49.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.7ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (271.4ms)
Completed 200 OK in 286ms (Views: 243.2ms | ActiveRecord: 42.3ms)
  [1m[35m (11.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (46.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (15.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (36.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 01:45:09', '2017-04-04 01:45:09')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (67.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (19.5ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 01:45:09', '2017-04-04 01:45:09')
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.0ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 01:45:09', '2017-04-04 01:45:09')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (166.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 01:45:10', '2017-04-04 01:45:10')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (63.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 01:45:10', '2017-04-04 01:45:10')[0m
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (92.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 01:45:10', '2017-04-04 01:45:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 01:45:10', '2017-04-04 01:45:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 01:45:10', '2017-04-04 01:45:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (135.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 01:45:10', '2017-04-04 01:45:10')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (47.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 01:45:10', '2017-04-04 01:45:10')[0m
  [1m[35m (3.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (136.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (18.9ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.6ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (9.7ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (269.7ms)
Completed 200 OK in 285ms (Views: 254.1ms | ActiveRecord: 30.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (9.0ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (262.2ms)
Completed 200 OK in 279ms (Views: 278.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (11.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (23.5ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (248.1ms)
Completed 200 OK in 264ms (Views: 239.0ms | ActiveRecord: 24.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (234.0ms)
Completed 200 OK in 249ms (Views: 247.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (9.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (254.2ms)
Completed 200 OK in 271ms (Views: 241.7ms | ActiveRecord: 28.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (12.8ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (24.0ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (639.8ms)
Completed 200 OK in 663ms (Views: 661.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (3.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (227.9ms)
Completed 200 OK in 244ms (Views: 242.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (222.6ms)
Completed 200 OK in 240ms (Views: 238.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (29.8ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (267.8ms)
Completed 200 OK in 283ms (Views: 251.9ms | ActiveRecord: 30.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (1.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (4.0ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (228.9ms)
Completed 200 OK in 245ms (Views: 244.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (17.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 03:49:45', '2017-04-04 03:49:45')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (28.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (253.2ms)
Completed 200 OK in 269ms (Views: 239.9ms | ActiveRecord: 29.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 03:51:32', '2017-04-04 03:51:32')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.4ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (223.7ms)
Completed 200 OK in 240ms (Views: 238.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 03:52:27', '2017-04-04 03:52:27')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.4ms)
  [1m[36m (51.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (222.2ms)
Completed 200 OK in 238ms (Views: 236.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 03:52:59', '2017-04-04 03:52:59')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (48.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (7.0ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (224.5ms)
Completed 200 OK in 242ms (Views: 240.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 03:53:30', '2017-04-04 03:53:30')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (56.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (221.7ms)
Completed 200 OK in 237ms (Views: 235.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 03:53:53', '2017-04-04 03:53:53')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.2ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.4ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (242.6ms)
Completed 200 OK in 259ms (Views: 240.0ms | ActiveRecord: 18.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 03:56:57', '2017-04-04 03:56:57')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[36m (57.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (208.6ms)
Completed 200 OK in 221ms (Views: 219.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 03:57:17', '2017-04-04 03:57:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[36m (127.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 03:57:17', '2017-04-04 03:57:17')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (56.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 03:57:17', '2017-04-04 03:57:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 03:57:17', '2017-04-04 03:57:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (201.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 03:57:17', '2017-04-04 03:57:17')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 03:57:17', '2017-04-04 03:57:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (52.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 03:57:17', '2017-04-04 03:57:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 03:57:17', '2017-04-04 03:57:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 03:57:17', '2017-04-04 03:57:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (223.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 03:57:18', '2017-04-04 03:57:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (83.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.0ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 03:57:18', '2017-04-04 03:57:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (117.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (207.3ms)
Completed 200 OK in 219ms (Views: 218.2ms | ActiveRecord: 0.9ms)
  [1m[35m (12.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 04:00:32', '2017-04-04 04:00:32')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.5ms)
  [1m[36m (195.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.4ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (8.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (259.7ms)
Completed 200 OK in 276ms (Views: 244.8ms | ActiveRecord: 30.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 04:01:31', '2017-04-04 04:01:31')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[36m (48.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (222.2ms)
Completed 200 OK in 240ms (Views: 238.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 04:02:13', '2017-04-04 04:02:13')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.3ms)
  [1m[36m (172.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (30.1ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (254.4ms)
Completed 200 OK in 273ms (Views: 241.9ms | ActiveRecord: 30.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (21.0ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.8ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 04:03:34', '2017-04-04 04:03:34')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[36m (53.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (103.9ms)[0m  [1mDROP DATABASE IF EXISTS `codechallenge_test`[0m
  [1m[35m (0.4ms)[0m  CREATE DATABASE `codechallenge_test` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (536.9ms)[0m  [1mCREATE TABLE `items` (`id` int(11) auto_increment PRIMARY KEY, `description` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `price` decimal(8,2)) ENGINE=InnoDB[0m
  [1m[35m (425.4ms)[0m  CREATE TABLE `merchants` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (356.7ms)[0m  [1mCREATE TABLE `purchasers` (`id` int(11) auto_increment PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (312.3ms)[0m  CREATE TABLE `purchases` (`id` int(11) auto_increment PRIMARY KEY, `purchaser_id` int(11), `item_id` int(11), `quantity` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (423.8ms)[0m  [1mCREATE TABLE `sales` (`id` int(11) auto_increment PRIMARY KEY, `merchant_id` int(11), `item_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (425.0ms)[0m  CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (707.6ms)[0m  [1mCREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) [0m
  [1m[35m (0.3ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (86.8ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402034517')[0m
  [1m[35m (55.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402034424')
  [1m[36m (55.7ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402031035')[0m
  [1m[35m (55.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170401055803')
  [1m[36m (55.7ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170401061100')[0m
  [1m[35m (48.8ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402031604')
  [1m[36m (55.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402033651')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (518.4ms)
Completed 200 OK in 558ms (Views: 530.5ms | ActiveRecord: 26.5ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (31.8ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 04:28:26', '2017-04-04 04:28:26')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.8ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.4ms)
  [1m[36m (97.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000008795d58 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-20195-53joeb>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (5.7ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 04:28:26', '2017-04-04 04:28:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 1, 2, '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (23.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 04:28:26', '2017-04-04 04:28:26')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 04:28:26', '2017-04-04 04:28:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (3, 2, 5, '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (2, 2, '2017-04-04 04:28:26', '2017-04-04 04:28:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 04:28:26', '2017-04-04 04:28:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (4, 3, 1, '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (3, 3, '2017-04-04 04:28:26', '2017-04-04 04:28:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 3, 4, '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.7ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (3, 3, '2017-04-04 04:28:26', '2017-04-04 04:28:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (38.8ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (99.9ms)
Completed 200 OK in 498ms (Views: 134.9ms | ActiveRecord: 110.5ms)
  [1m[36m (105.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (12.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (20.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (251.2ms)
Completed 200 OK in 268ms (Views: 245.7ms | ActiveRecord: 21.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (9.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 04:34:31', '2017-04-04 04:34:31')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[36m (144.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000073d7ed8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-20398-2ebe1v>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 04:34:32', '2017-04-04 04:34:32')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (50.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (6, 4, 2, '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (4, 4, '2017-04-04 04:34:32', '2017-04-04 04:34:32')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 04:34:32', '2017-04-04 04:34:32')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (7, 5, 5, '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (5, 5, '2017-04-04 04:34:32', '2017-04-04 04:34:32')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 04:34:32', '2017-04-04 04:34:32')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (8, 6, 1, '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (6, 6, '2017-04-04 04:34:32', '2017-04-04 04:34:32')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (6, 6, 4, '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (6, 6, '2017-04-04 04:34:32', '2017-04-04 04:34:32')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (14.2ms)
Completed 200 OK in 271ms (Views: 16.7ms | ActiveRecord: 163.8ms)
  [1m[36m (48.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (246.1ms)
Completed 200 OK in 263ms (Views: 242.8ms | ActiveRecord: 19.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (4.3ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 04:38:59', '2017-04-04 04:38:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[36m (57.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000074a3628 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-20580-1560h9n>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 04:39:00', '2017-04-04 04:39:00')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (10, 7, 2, '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (7, 7, '2017-04-04 04:39:00', '2017-04-04 04:39:00')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 04:39:00', '2017-04-04 04:39:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (11, 8, 5, '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (1.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (8, 8, '2017-04-04 04:39:00', '2017-04-04 04:39:00')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 04:39:00', '2017-04-04 04:39:00')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (12, 9, 1, '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (9, 9, '2017-04-04 04:39:00', '2017-04-04 04:39:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (10, 9, 4, '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (9, 9, '2017-04-04 04:39:00', '2017-04-04 04:39:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (30.7ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.8ms)
Completed 200 OK in 328ms (Views: 15.3ms | ActiveRecord: 228.0ms)
  [1m[36m (49.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (23.9ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (34.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (259.2ms)
Completed 200 OK in 277ms (Views: 241.5ms | ActiveRecord: 35.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 04:39:38', '2017-04-04 04:39:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[36m (60.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005f945c0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-20648-zc8pzf>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 04:39:38', '2017-04-04 04:39:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (14, 10, 2, '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (10, 10, '2017-04-04 04:39:38', '2017-04-04 04:39:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 04:39:38', '2017-04-04 04:39:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (15, 11, 5, '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (11, 11, '2017-04-04 04:39:38', '2017-04-04 04:39:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 04:39:38', '2017-04-04 04:39:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (16, 12, 1, '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (1.1ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (12, 12, '2017-04-04 04:39:38', '2017-04-04 04:39:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (14, 12, 4, '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (12, 12, '2017-04-04 04:39:38', '2017-04-04 04:39:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.8ms)
Completed 200 OK in 245ms (Views: 15.3ms | ActiveRecord: 146.2ms)
  [1m[36m (89.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (263.2ms)
Completed 200 OK in 279ms (Views: 259.9ms | ActiveRecord: 18.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 04:41:14', '2017-04-04 04:41:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[36m (48.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000084c70e0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-20705-o3msa7>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 04:41:14', '2017-04-04 04:41:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (18, 13, 2, '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (13, 13, '2017-04-04 04:41:14', '2017-04-04 04:41:14')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 04:41:14', '2017-04-04 04:41:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (19, 14, 5, '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (14, 14, '2017-04-04 04:41:14', '2017-04-04 04:41:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 04:41:14', '2017-04-04 04:41:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (20, 15, 1, '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (15, 15, '2017-04-04 04:41:14', '2017-04-04 04:41:14')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (18, 15, 4, '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (15, 15, '2017-04-04 04:41:14', '2017-04-04 04:41:14')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.2ms)
Completed 200 OK in 207ms (Views: 14.5ms | ActiveRecord: 110.1ms)
  [1m[36m (128.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (211.0ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (16.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[36mActiveRecord::SchemaMigration Load (16.1ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (20.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (32.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (41.8ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 06:02:01', '2017-04-04 06:02:01')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (689.8ms)
Completed 200 OK in 752ms (Views: 751.0ms | ActiveRecord: 0.3ms)
  [1m[35m (80.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000007edd198 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-22351-1tmvkr2>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (23.9ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.9ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:02:02', '2017-04-04 06:02:02')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (22, 16, 2, '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (16, 16, '2017-04-04 06:02:02', '2017-04-04 06:02:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (16.7ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:02:02', '2017-04-04 06:02:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (23, 17, 5, '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (17, 17, '2017-04-04 06:02:02', '2017-04-04 06:02:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:02:02', '2017-04-04 06:02:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (24, 18, 1, '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (18, 18, '2017-04-04 06:02:02', '2017-04-04 06:02:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (22, 18, 4, '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (18, 18, '2017-04-04 06:02:02', '2017-04-04 06:02:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (25.7ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (171.8ms)
Completed 200 OK in 710ms (Views: 218.2ms | ActiveRecord: 355.2ms)
  [1m[36m (39.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (18.9ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 06:02:02', '2017-04-04 06:02:02')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (61.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (21.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 06:02:03', '2017-04-04 06:02:03')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 06:02:03', '2017-04-04 06:02:03')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (67.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 06:02:03', '2017-04-04 06:02:03')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 06:02:03', '2017-04-04 06:02:03')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (45.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 06:02:03', '2017-04-04 06:02:03')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 06:02:03', '2017-04-04 06:02:03')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 06:02:03', '2017-04-04 06:02:03')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (51.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 06:02:03', '2017-04-04 06:02:03')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 06:02:03', '2017-04-04 06:02:03')[0m
  [1m[35m (2.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (52.9ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (8.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (20.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (416.8ms)
Completed 200 OK in 455ms (Views: 433.2ms | ActiveRecord: 21.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (18.4ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.4ms)
  [1m[35m (71.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006bba980 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-22628-1lat9yn>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (27, 23, 2, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (23, 21, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (28, 24, 5, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (24, 22, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (29, 25, 1, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (25, 23, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (27, 25, 4, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (25, 23, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (171.7ms)
Completed 200 OK in 510ms (Views: 199.1ms | ActiveRecord: 178.9ms)
  [1m[36m (43.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004e92ba0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-22628-rk19xl>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (30, 26, 2, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (26, 24, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.2ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (31, 27, 5, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (27, 25, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (32, 28, 1, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (28, 26, '2017-04-04 06:12:00', '2017-04-04 06:12:00')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (30, 28, 4, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (28, 26, '2017-04-04 06:12:00', '2017-04-04 06:12:00')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (4.0ms)
Completed 200 OK in 76ms (Views: 6.1ms | ActiveRecord: 17.7ms)
  [1m[35m (77.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 06:12:01', '2017-04-04 06:12:01')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (48.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 06:12:01', '2017-04-04 06:12:01')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 06:12:01', '2017-04-04 06:12:01')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (55.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 06:12:01', '2017-04-04 06:12:01')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (86.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 06:12:01', '2017-04-04 06:12:01')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (108.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 06:12:01', '2017-04-04 06:12:01')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (1.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (80.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 06:12:01', '2017-04-04 06:12:01')
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 06:12:01', '2017-04-04 06:12:01')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (53.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 06:12:01', '2017-04-04 06:12:01')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (45.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 06:12:01', '2017-04-04 06:12:01')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (44.0ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.5ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (28.5ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1992.7ms)
Completed 200 OK in 2116ms (Views: 2059.6ms | ActiveRecord: 56.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.3ms)
  [1m[35m (1.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (24.0ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 06:27:24', '2017-04-04 06:27:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (3.8ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.7ms)
  [1m[35m (75.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005d3eb68 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23041-ivk0g9>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:27:24', '2017-04-04 06:27:24')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:27:24', '2017-04-04 06:27:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (35, 33, 2, '2017-04-04 06:27:24', '2017-04-04 06:27:24')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:27:24', '2017-04-04 06:27:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (33, 29, '2017-04-04 06:27:24', '2017-04-04 06:27:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (61.8ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:27:24', '2017-04-04 06:27:24')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (36, 34, 5, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (34, 30, '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (1.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (37, 35, 1, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (35, 31, '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (35, 35, 4, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (35, 31, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (354.6ms)
Completed 200 OK in 817ms (Views: 357.0ms | ActiveRecord: 204.7ms)
  [1m[36m (87.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000002b252d0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23041-11znoaq>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (38, 36, 2, '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (36, 32, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (2.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (39, 37, 5, '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (37, 33, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (40, 38, 1, '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (38, 34, '2017-04-04 06:27:25', '2017-04-04 06:27:25')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (38, 38, 4, '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (38, 34, '2017-04-04 06:27:25', '2017-04-04 06:27:25')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (30.2ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (4.1ms)
Completed 200 OK in 167ms (Views: 6.9ms | ActiveRecord: 55.5ms)
  [1m[35m (51.5ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (5.8ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (32.0ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (278.2ms)
Completed 200 OK in 297ms (Views: 264.0ms | ActiveRecord: 32.7ms)
  [1m[35m (1.4ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.5ms)
  [1m[35m (1.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.6ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 1.4ms)
  [1m[36m (2.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (2.4ms)[0m  BEGIN
  [1m[36m (1.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (2.1ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (5.7ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (8.7ms)
Completed 200 OK in 11ms (Views: 5.3ms | ActiveRecord: 5.7ms)
  [1m[35m (67.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000086c6198 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23223-1lv9o0k>>}
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (42, 39, 2, '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (39, 35, '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (43, 40, 5, '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (40, 36, '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (44, 41, 1, '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (41, 37, '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (42, 41, 4, '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (41, 37, '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.4ms)
Completed 200 OK in 272ms (Views: 16.1ms | ActiveRecord: 154.5ms)
  [1m[36m (69.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006b67898 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23223-15ktgg3>>}
  [1m[36mPurchaser Load (0.5ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (45, 42, 2, '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (42, 38, '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:30:51', '2017-04-04 06:30:51')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:30:51', '2017-04-04 06:30:51')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (46, 43, 5, '2017-04-04 06:30:52', '2017-04-04 06:30:52')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:30:52', '2017-04-04 06:30:52')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (43, 39, '2017-04-04 06:30:52', '2017-04-04 06:30:52')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:30:52', '2017-04-04 06:30:52')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:30:52', '2017-04-04 06:30:52')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (47, 44, 1, '2017-04-04 06:30:52', '2017-04-04 06:30:52')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.6ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.9ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:30:52', '2017-04-04 06:30:52')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (44, 40, '2017-04-04 06:30:52', '2017-04-04 06:30:52')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (45, 44, 4, '2017-04-04 06:30:52', '2017-04-04 06:30:52')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (44, 40, '2017-04-04 06:30:52', '2017-04-04 06:30:52')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.6ms)
Completed 200 OK in 97ms (Views: 4.4ms | ActiveRecord: 24.1ms)
  [1m[35m (97.4ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (288.6ms)
Completed 200 OK in 309ms (Views: 265.2ms | ActiveRecord: 43.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (8.2ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.7ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[35m (51.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000077face0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23441-mqofj>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (22.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:36:36', '2017-04-04 06:36:36')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (49, 45, 2, '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (45, 41, '2017-04-04 06:36:36', '2017-04-04 06:36:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:36:36', '2017-04-04 06:36:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (50, 46, 5, '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (46, 42, '2017-04-04 06:36:36', '2017-04-04 06:36:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:36:36', '2017-04-04 06:36:36')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (51, 47, 1, '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (47, 43, '2017-04-04 06:36:36', '2017-04-04 06:36:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (1.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (49, 47, 4, '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (47, 43, '2017-04-04 06:36:36', '2017-04-04 06:36:36')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.9ms)
Completed 200 OK in 271ms (Views: 15.5ms | ActiveRecord: 167.1ms)
  [1m[36m (138.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005c94050 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23441-1bmdn10>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:36:37', '2017-04-04 06:36:37')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (52, 48, 2, '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (48, 44, '2017-04-04 06:36:37', '2017-04-04 06:36:37')[0m
  [1m[35m (1.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:36:37', '2017-04-04 06:36:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (53, 49, 5, '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (49, 45, '2017-04-04 06:36:37', '2017-04-04 06:36:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:36:37', '2017-04-04 06:36:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (54, 50, 1, '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (50, 46, '2017-04-04 06:36:37', '2017-04-04 06:36:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (52, 50, 4, '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (50, 46, '2017-04-04 06:36:37', '2017-04-04 06:36:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (3.4ms)
Completed 200 OK in 85ms (Views: 5.8ms | ActiveRecord: 22.0ms)
  [1m[35m (165.5ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (5.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (262.6ms)
Completed 200 OK in 280ms (Views: 245.0ms | ActiveRecord: 34.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (14.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[35m (58.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000780cb98 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23533-1vp56s6>>}
  [1m[35mPurchaser Load (0.7ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (56, 51, 2, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (51, 47, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (57, 52, 5, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (52, 48, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (58, 53, 1, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (53, 49, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (56, 53, 4, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (53, 49, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (16.2ms)
Completed 200 OK in 292ms (Views: 18.1ms | ActiveRecord: 185.2ms)
  [1m[36m (150.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005c90950 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23533-v6752r>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (59, 54, 2, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (54, 50, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (1.7ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.7ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (60, 55, 5, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (55, 51, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (61, 56, 1, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (56, 52, '2017-04-04 06:38:46', '2017-04-04 06:38:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (59, 56, 4, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.7ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (56, 52, '2017-04-04 06:38:46', '2017-04-04 06:38:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.7ms)
Completed 200 OK in 84ms (Views: 4.4ms | ActiveRecord: 22.4ms)
  [1m[35m (144.6ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (16.0ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (231.2ms)
Completed 200 OK in 247ms (Views: 245.1ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.6ms)
Completed 200 OK in 8ms (Views: 6.2ms | ActiveRecord: 1.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.3ms)
  [1m[35m (56.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000076be8b8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23599-s3mmwv>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (63, 57, 2, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (57, 53, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (64, 58, 5, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (2.6ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (58, 54, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (65, 59, 1, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (59, 55, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (63, 59, 4, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (59, 55, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (14.3ms)
Completed 200 OK in 152ms (Views: 17.1ms | ActiveRecord: 44.1ms)
  [1m[36m (89.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005b68fc8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23599-i002s0>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (66, 60, 2, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (60, 56, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (1.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (67, 61, 5, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (61, 57, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (3.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (68, 62, 1, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (62, 58, '2017-04-04 06:39:10', '2017-04-04 06:39:10')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (66, 62, 4, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (62, 58, '2017-04-04 06:39:10', '2017-04-04 06:39:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (29.7ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.5ms)
Completed 200 OK in 113ms (Views: 4.4ms | ActiveRecord: 52.4ms)
  [1m[35m (57.6ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (226.1ms)
Completed 200 OK in 243ms (Views: 241.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (22.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 06:39:23', '2017-04-04 06:39:23')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.3ms)
  [1m[35m (56.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000007f72518 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23615-1y6sr7d>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:39:23', '2017-04-04 06:39:23')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (70, 63, 2, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (63, 59, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (1.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (71, 64, 5, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (64, 60, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (72, 65, 1, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (65, 61, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (70, 65, 4, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (65, 61, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.7ms)
Completed 200 OK in 279ms (Views: 15.3ms | ActiveRecord: 176.8ms)
  [1m[36m (85.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000064137b8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23615-wq2fba>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (2.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (73, 66, 2, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (66, 62, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (74, 67, 5, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (67, 63, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (75, 68, 1, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (68, 64, '2017-04-04 06:39:24', '2017-04-04 06:39:24')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (73, 68, 4, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (68, 64, '2017-04-04 06:39:24', '2017-04-04 06:39:24')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 83ms (Views: 4.2ms | ActiveRecord: 23.4ms)
  [1m[35m (46.9ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (236.6ms)
Completed 200 OK in 253ms (Views: 232.7ms | ActiveRecord: 20.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 06:39:35', '2017-04-04 06:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.4ms)
  [1m[35m (55.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000864d7e8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23622-16ixxtd>>}
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:39:35', '2017-04-04 06:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:39:35', '2017-04-04 06:39:35')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (77, 69, 2, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (69, 65, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (3.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (78, 70, 5, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (70, 66, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (3.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (79, 71, 1, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (71, 67, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (3.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (77, 71, 4, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (71, 67, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (15.2ms)
Completed 200 OK in 144ms (Views: 17.3ms | ActiveRecord: 38.4ms)
  [1m[36m (75.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000690c648 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170403-23622-4na0y3>>}
  [1m[36mPurchaser Load (0.5ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (80, 72, 2, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (1.4ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (1.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (72, 68, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.2ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (3.0ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (81, 73, 5, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (73, 69, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (82, 74, 1, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (74, 70, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (80, 74, 4, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (74, 70, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.6ms)
Completed 200 OK in 81ms (Views: 4.5ms | ActiveRecord: 23.1ms)
  [1m[35m (71.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (17.1ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (42.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (53.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (53.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (1.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (53.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (49.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (48.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 06:39:36', '2017-04-04 06:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 06:39:36', '2017-04-04 06:39:36')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (53.7ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mDROP DATABASE IF EXISTS `codechallenge_test`[0m
  [1m[35m (0.3ms)[0m  CREATE DATABASE `codechallenge_test` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (417.5ms)[0m  [1mCREATE TABLE `items` (`id` int(11) auto_increment PRIMARY KEY, `description` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `price` decimal(8,2)) ENGINE=InnoDB[0m
  [1m[35m (336.3ms)[0m  CREATE TABLE `merchants` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (390.3ms)[0m  [1mCREATE TABLE `purchasers` (`id` int(11) auto_increment PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (401.0ms)[0m  CREATE TABLE `purchases` (`id` int(11) auto_increment PRIMARY KEY, `purchaser_id` int(11), `item_id` int(11), `quantity` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (345.7ms)[0m  [1mCREATE TABLE `sales` (`id` int(11) auto_increment PRIMARY KEY, `merchant_id` int(11), `item_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (393.2ms)[0m  CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (654.6ms)[0m  [1mCREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) [0m
  [1m[35m (0.3ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (92.4ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402034517')[0m
  [1m[35m (55.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402034424')
  [1m[36m (55.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402031035')[0m
  [1m[35m (55.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170401055803')
  [1m[36m (55.7ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170401061100')[0m
  [1m[35m (55.7ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402031604')
  [1m[36m (55.7ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402033651')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (14.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (19.8ms)
Completed 200 OK in 235ms (Views: 219.2ms | ActiveRecord: 15.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 08:35:01', '2017-04-04 08:35:01')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.4ms)
  [1m[35m (100.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000080d4af0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27072-8ayunm>>}
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 1, 2, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.9ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (3, 2, 5, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (2, 2, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (4, 3, 1, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (3, 3, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 3, 4, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (3, 3, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.2ms)
Completed 200 OK in 119ms (Views: 16.0ms | ActiveRecord: 24.6ms)
  [1m[36m (83.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006451180 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27072-16uwi89>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (5, 4, 2, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (4, 4, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (6, 5, 5, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (5, 5, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (7, 6, 1, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (6, 6, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.6ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (5, 6, 4, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (6, 6, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.7ms)
Completed 200 OK in 82ms (Views: 5.4ms | ActiveRecord: 22.3ms)
  [1m[35m (47.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004f78178 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-27072-g8l6ti>>}
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.6ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (56.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (45.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (51.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (1.1ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (54.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.8ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (51.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 08:35:02', '2017-04-04 08:35:02')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (55.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 08:35:02', '2017-04-04 08:35:02')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (56.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (15.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (7.0ms)
Completed 200 OK in 238ms (Views: 236.6ms | ActiveRecord: 1.0ms)
  [1m[35m (20.6ms)[0m  ROLLBACK
  [1m[36m (4.0ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (3.8ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 3.8ms)
  [1m[36m (1.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (7.5ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (9.1ms)
Completed 200 OK in 12ms (Views: 4.4ms | ActiveRecord: 7.5ms)
  [1m[35m (5.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (8.5ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (10.0ms)
Completed 200 OK in 13ms (Views: 4.1ms | ActiveRecord: 8.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (4.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (9.1ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.5ms)
  [1m[35m (66.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000007a4fce8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27131-1h3mrb1>>}
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.9ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (10, 11, 2, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (11, 9, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (11, 12, 5, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (12, 10, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (12, 13, 1, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (2.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (13, 11, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (10, 13, 4, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (2.5ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (13, 11, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (16.0ms)
Completed 200 OK in 254ms (Views: 19.1ms | ActiveRecord: 135.5ms)
  [1m[36m (55.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005d20460 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27131-iv8uer>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (13, 14, 2, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (14, 12, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (14, 15, 5, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (15, 13, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (15, 16, 1, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (16, 14, '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (13, 16, 4, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (16, 14, '2017-04-04 08:36:58', '2017-04-04 08:36:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 76ms (Views: 4.8ms | ActiveRecord: 19.2ms)
  [1m[35m (75.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000481f458 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-27131-2gslp>>}
  [1m[35m (1.2ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 7ms (Views: 4.5ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.8ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 08:36:58', '2017-04-04 08:36:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (67.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 08:36:59', '2017-04-04 08:36:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 08:36:59', '2017-04-04 08:36:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (68.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 08:36:59', '2017-04-04 08:36:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (2.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (51.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:36:59', '2017-04-04 08:36:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (46.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:36:59', '2017-04-04 08:36:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (85.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:36:59', '2017-04-04 08:36:59')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:36:59', '2017-04-04 08:36:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (52.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 08:36:59', '2017-04-04 08:36:59')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (54.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 08:36:59', '2017-04-04 08:36:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (49.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (4.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (12.7ms)
Completed 200 OK in 259ms (Views: 250.8ms | ActiveRecord: 7.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (4.5ms)
Completed 200 OK in 7ms (Views: 6.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 08:39:34', '2017-04-04 08:39:34')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.4ms)
  [1m[35m (551.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000087ae1c8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27308-13vfilw>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:39:35', '2017-04-04 08:39:35')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (18, 21, 2, '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (21, 17, '2017-04-04 08:39:35', '2017-04-04 08:39:35')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:39:35', '2017-04-04 08:39:35')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (19, 22, 5, '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (22, 18, '2017-04-04 08:39:35', '2017-04-04 08:39:35')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (1.5ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:39:35', '2017-04-04 08:39:35')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (20, 23, 1, '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (23, 19, '2017-04-04 08:39:35', '2017-04-04 08:39:35')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (18, 23, 4, '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (23, 19, '2017-04-04 08:39:35', '2017-04-04 08:39:35')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (15.5ms)
Completed 200 OK in 418ms (Views: 18.6ms | ActiveRecord: 297.3ms)
  [1m[36m (302.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006aa08b0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27308-1f2szm4>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:39:36', '2017-04-04 08:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (21, 24, 2, '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (24, 20, '2017-04-04 08:39:36', '2017-04-04 08:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:39:36', '2017-04-04 08:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (22, 25, 5, '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (25, 21, '2017-04-04 08:39:36', '2017-04-04 08:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:39:36', '2017-04-04 08:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (23, 26, 1, '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (26, 22, '2017-04-04 08:39:36', '2017-04-04 08:39:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (21, 26, 4, '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (26, 22, '2017-04-04 08:39:36', '2017-04-04 08:39:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 71ms (Views: 4.6ms | ActiveRecord: 16.6ms)
  [1m[35m (214.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000055c2948 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-27308-1h2ccf0>>}
  [1m[35m (0.5ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (3.0ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 08:43:37', '2017-04-04 08:43:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (52.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 08:43:37', '2017-04-04 08:43:37')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 08:43:37', '2017-04-04 08:43:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (145.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (38.7ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 08:43:37', '2017-04-04 08:43:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (55.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.8ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:43:37', '2017-04-04 08:43:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (43.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:43:38', '2017-04-04 08:43:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (49.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:43:38', '2017-04-04 08:43:38')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:43:38', '2017-04-04 08:43:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (140.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 08:43:38', '2017-04-04 08:43:38')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 08:43:38', '2017-04-04 08:43:38')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (45.8ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (5.1ms)
Completed 200 OK in 223ms (Views: 221.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.7ms)
  [1m[35m (64.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006b20510 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27428-1kplhq2>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.1ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (26, 31, 2, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (31, 25, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (27, 32, 5, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (32, 26, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.9ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.9ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (28, 33, 1, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (33, 27, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (26, 33, 4, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (33, 27, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.2ms)
Completed 200 OK in 151ms (Views: 16.2ms | ActiveRecord: 56.6ms)
  [1m[36m (101.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000065a0180 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27428-133taq0>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (29, 34, 2, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (34, 28, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (30, 35, 5, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (35, 29, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (31, 36, 1, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (36, 30, '2017-04-04 08:43:45', '2017-04-04 08:43:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (29, 36, 4, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (36, 30, '2017-04-04 08:43:45', '2017-04-04 08:43:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 73ms (Views: 4.6ms | ActiveRecord: 17.3ms)
  [1m[35m (42.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000050a2058 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-27428-1gfm5s0>>}
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.1ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 08:50:45', '2017-04-04 08:50:45')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (53.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 08:50:45', '2017-04-04 08:50:45')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 08:50:45', '2017-04-04 08:50:45')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (154.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 08:50:45', '2017-04-04 08:50:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (51.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:50:45', '2017-04-04 08:50:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (55.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:50:45', '2017-04-04 08:50:45')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (56.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:50:45', '2017-04-04 08:50:45')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:50:45', '2017-04-04 08:50:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (162.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 08:50:45', '2017-04-04 08:50:45')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (105.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 08:50:46', '2017-04-04 08:50:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (55.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (12.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (71.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (77.0ms)
Completed 200 OK in 309ms (Views: 236.3ms | ActiveRecord: 71.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 08:50:52', '2017-04-04 08:50:52')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.4ms)
  [1m[35m (54.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000086fac40 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27722-29u20s>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.9ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:50:52', '2017-04-04 08:50:52')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (34, 41, 2, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (41, 33, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (35, 42, 5, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (2.0ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (42, 34, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (36, 43, 1, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (43, 35, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (34, 43, 4, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (43, 35, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.3ms)
Completed 200 OK in 154ms (Views: 16.3ms | ActiveRecord: 52.9ms)
  [1m[36m (76.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000698d518 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27722-1pspp15>>}
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (37, 44, 2, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (44, 36, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.7ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (38, 45, 5, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (45, 37, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.8ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (39, 46, 1, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (46, 38, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (37, 46, 4, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (46, 38, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 78ms (Views: 4.6ms | ActiveRecord: 21.2ms)
  [1m[35m (51.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005497af0 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-27722-1lun81x>>}
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.1ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (1.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (47.0ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (55.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (51.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (54.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (51.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (51.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 08:50:53', '2017-04-04 08:50:53')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (1.8ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 08:50:53', '2017-04-04 08:50:53')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (56.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (10.0ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (5.4ms)
Completed 200 OK in 225ms (Views: 223.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (56.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000007e4c8c8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27768-16vlj7q>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (42, 51, 2, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (51, 41, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (43, 52, 5, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (52, 42, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (44, 53, 1, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (53, 43, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (42, 53, 4, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (53, 43, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.8ms)
Completed 200 OK in 222ms (Views: 16.6ms | ActiveRecord: 129.9ms)
  [1m[36m (75.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006138930 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27768-1nj28t1>>}
  [1m[36mPurchaser Load (0.5ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (45, 54, 2, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.4ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (54, 44, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (46, 55, 5, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (55, 45, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (47, 56, 1, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (56, 46, '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (45, 56, 4, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (56, 46, '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 83ms (Views: 4.6ms | ActiveRecord: 20.0ms)
  [1m[35m (68.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004c6fb48 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-27768-1uq1b7h>>}
  [1m[35m (0.5ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.6ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.8ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (45.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 08:52:10', '2017-04-04 08:52:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 08:52:10', '2017-04-04 08:52:10')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (44.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.8ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 08:52:11', '2017-04-04 08:52:11')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (51.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (1.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:52:11', '2017-04-04 08:52:11')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (43.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:52:11', '2017-04-04 08:52:11')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (51.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:52:11', '2017-04-04 08:52:11')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:52:11', '2017-04-04 08:52:11')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (52.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 08:52:11', '2017-04-04 08:52:11')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 08:52:11', '2017-04-04 08:52:11')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (45.8ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (89.1ms)
Completed 200 OK in 320ms (Views: 235.0ms | ActiveRecord: 84.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
  [1m[35m (210.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000007119610 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27807-1m12qew>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:54:05', '2017-04-04 08:54:05')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (50, 61, 2, '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (61, 49, '2017-04-04 08:54:05', '2017-04-04 08:54:05')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:54:05', '2017-04-04 08:54:05')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (51, 62, 5, '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (62, 50, '2017-04-04 08:54:05', '2017-04-04 08:54:05')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:54:05', '2017-04-04 08:54:05')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (52, 63, 1, '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (63, 51, '2017-04-04 08:54:05', '2017-04-04 08:54:05')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (50, 63, 4, '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (63, 51, '2017-04-04 08:54:05', '2017-04-04 08:54:05')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (14.1ms)
Completed 200 OK in 248ms (Views: 17.0ms | ActiveRecord: 154.3ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT `purchasers`.* FROM `purchasers`[0m
  [1m[35mPurchaser Load (27.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` DESC LIMIT 1
  [1m[36mPurchaser Load (3.1ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` DESC LIMIT 1[0m
  [1m[35m (55.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000032e12a8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27807-1rdaoac>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:55:47', '2017-04-04 08:55:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (53, 64, 2, '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.8ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (64, 52, '2017-04-04 08:55:47', '2017-04-04 08:55:47')
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.0ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:55:47', '2017-04-04 08:55:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (54, 65, 5, '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (65, 53, '2017-04-04 08:55:47', '2017-04-04 08:55:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:55:47', '2017-04-04 08:55:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (55, 66, 1, '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (66, 54, '2017-04-04 08:55:47', '2017-04-04 08:55:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.6ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (53, 66, 4, '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (66, 54, '2017-04-04 08:55:47', '2017-04-04 08:55:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 78ms (Views: 4.8ms | ActiveRecord: 22.4ms)
  [1m[36m (48.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000071e82d0 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-27807-t1f87f>>}
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.9ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 08:55:49', '2017-04-04 08:55:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (49.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 08:55:49', '2017-04-04 08:55:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 08:55:49', '2017-04-04 08:55:49')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (55.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 08:55:49', '2017-04-04 08:55:49')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (1.1ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:55:49', '2017-04-04 08:55:49')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (51.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:55:49', '2017-04-04 08:55:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:55:49', '2017-04-04 08:55:49')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:55:49', '2017-04-04 08:55:49')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (49.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 08:55:49', '2017-04-04 08:55:49')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (93.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 08:55:49', '2017-04-04 08:55:49')[0m
  [1m[35m (1.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (53.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (5.5ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (10.4ms)
Completed 200 OK in 238ms (Views: 231.2ms | ActiveRecord: 6.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.8ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.3ms)
  [1m[35m (56.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006feb8d8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27890-ygfe7q>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (58, 71, 2, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (71, 57, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (59, 72, 5, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (72, 58, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (60, 73, 1, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (73, 59, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (58, 73, 4, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (73, 59, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.1ms)
Completed 200 OK in 141ms (Views: 16.0ms | ActiveRecord: 44.4ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` DESC LIMIT 1[0m
  [1m[35m (59.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000052aa5f8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27890-7ei2ib>>}
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (61, 74, 2, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (74, 60, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (62, 75, 5, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (75, 61, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (63, 76, 1, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (76, 62, '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (61, 76, 4, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (76, 62, '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.5ms)
Completed 200 OK in 75ms (Views: 4.9ms | ActiveRecord: 18.7ms)
  [1m[36m (43.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000003dbf260 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-27890-1qrrz3p>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.1ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.1ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (47.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 08:55:56', '2017-04-04 08:55:56')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (55.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 08:55:56', '2017-04-04 08:55:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (75.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:55:57', '2017-04-04 08:55:57')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (67.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 08:55:57', '2017-04-04 08:55:57')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:55:57', '2017-04-04 08:55:57')[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 08:55:57', '2017-04-04 08:55:57')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (50.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 08:55:57', '2017-04-04 08:55:57')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 08:55:57', '2017-04-04 08:55:57')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (57.0ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (6.9ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (5.4ms)
Completed 200 OK in 226ms (Views: 224.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.9ms)
  [1m[35m (59.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000823e9e0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27900-s15pb6>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 08:56:26', '2017-04-04 08:56:26')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (66, 81, 2, '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (81, 65, '2017-04-04 08:56:26', '2017-04-04 08:56:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 08:56:26', '2017-04-04 08:56:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (67, 82, 5, '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (82, 66, '2017-04-04 08:56:26', '2017-04-04 08:56:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 08:56:26', '2017-04-04 08:56:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (68, 83, 1, '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (83, 67, '2017-04-04 08:56:26', '2017-04-04 08:56:26')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (66, 83, 4, '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (83, 67, '2017-04-04 08:56:26', '2017-04-04 08:56:26')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.6ms)
Completed 200 OK in 203ms (Views: 17.5ms | ActiveRecord: 107.1ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` DESC LIMIT 1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` DESC LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` DESC LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` DESC LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` DESC LIMIT 1[0m
  [1m[35m (52.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000001cd85d8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-27900-1hsfa5p>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (69, 84, 2, '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (84, 68, '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (70, 85, 5, '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (85, 69, '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (71, 86, 1, '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (86, 70, '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (1.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (69, 86, 4, '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (86, 70, '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.6ms)
Completed 200 OK in 75ms (Views: 5.0ms | ActiveRecord: 18.8ms)
  [1m[36m (70.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000007dd2d20 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-27900-1im4uwu>>}
  [1m[36m (0.6ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (3.3ms)
Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (54.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (55.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (54.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (51.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:00:59', '2017-04-04 09:00:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:00:59', '2017-04-04 09:00:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.7ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (13.2ms)
Completed 200 OK in 231ms (Views: 222.1ms | ActiveRecord: 8.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:01:19', '2017-04-04 09:01:19')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.4ms)
  [1m[35m (56.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000008228910 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28064-1emgomj>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:01:20', '2017-04-04 09:01:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (74, 91, 2, '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (91, 73, '2017-04-04 09:01:20', '2017-04-04 09:01:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:01:20', '2017-04-04 09:01:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (75, 92, 5, '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (92, 74, '2017-04-04 09:01:20', '2017-04-04 09:01:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:01:20', '2017-04-04 09:01:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (76, 93, 1, '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (93, 75, '2017-04-04 09:01:20', '2017-04-04 09:01:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (74, 93, 4, '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (93, 75, '2017-04-04 09:01:20', '2017-04-04 09:01:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.2ms)
Completed 200 OK in 220ms (Views: 15.9ms | ActiveRecord: 129.6ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` DESC LIMIT 1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.5ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.4ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35mMerchant Load (0.5ms)[0m  SELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35m (58.0ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004c65350 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28064-gc03xa>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.6ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (77, 94, 2, '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (94, 76, '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (78, 95, 5, '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (95, 77, '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.9ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (79, 96, 1, '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (96, 78, '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (77, 96, 4, '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (96, 78, '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 71ms (Views: 4.3ms | ActiveRecord: 18.5ms)
  [1m[36m (92.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000063db9a8 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28064-3tarte>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (1.8ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (49.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (1.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (43.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (46.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (41.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.7ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:09:40', '2017-04-04 09:09:40')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (126.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:09:40', '2017-04-04 09:09:40')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 219ms (Views: 217.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[35m (46.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000818dc80 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28393-pzdvbz>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (82, 101, 2, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (1.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (101, 81, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (83, 102, 5, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (102, 82, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (1.0ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (84, 103, 1, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (103, 83, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (82, 103, 4, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (103, 83, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (27.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.9ms)
Completed 200 OK in 169ms (Views: 15.5ms | ActiveRecord: 78.5ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36m (92.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000061cf448 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28393-1g1g316>>}
  [1m[36mPurchaser Load (1.1ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (85, 104, 2, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (104, 84, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (1.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.8ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (86, 105, 5, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (105, 85, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (87, 106, 1, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (106, 86, '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (85, 106, 4, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (106, 86, '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (1.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.5ms)
Completed 200 OK in 84ms (Views: 5.2ms | ActiveRecord: 23.5ms)
  [1m[35m (56.0ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004778f18 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28393-14adrh1>>}
  [1m[35m (0.4ms)[0m  SELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (49.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:09:46', '2017-04-04 09:09:46')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (54.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:09:46', '2017-04-04 09:09:46')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (53.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:09:47', '2017-04-04 09:09:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (1.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (57.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:09:47', '2017-04-04 09:09:47')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (51.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:09:47', '2017-04-04 09:09:47')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:09:47', '2017-04-04 09:09:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (52.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (39.8ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:09:47', '2017-04-04 09:09:47')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (56.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:09:47', '2017-04-04 09:09:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (47.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (4.8ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (91.1ms)
Completed 200 OK in 357ms (Views: 270.8ms | ActiveRecord: 86.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 9ms (Views: 8.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.4ms)
  [1m[35m (57.0ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000075c6050 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28405-yefdjn>>}
  [1m[35mPurchaser Load (0.5ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (90, 111, 2, '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (111, 89, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (91, 112, 5, '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (112, 90, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (92, 113, 1, '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (113, 91, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (90, 113, 4, '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (113, 91, '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.3ms)
Completed 200 OK in 112ms (Views: 16.1ms | ActiveRecord: 21.5ms)
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (92.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000586aa38 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28405-1ey7eb7>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (93, 114, 2, '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (114, 92, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.7ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (94, 115, 5, '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (115, 93, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (95, 116, 1, '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:10:09', '2017-04-04 09:10:09')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (116, 94, '2017-04-04 09:10:09', '2017-04-04 09:10:09')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (93, 116, 4, '2017-04-04 09:10:10', '2017-04-04 09:10:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (116, 94, '2017-04-04 09:10:10', '2017-04-04 09:10:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 75ms (Views: 4.8ms | ActiveRecord: 18.6ms)
  [1m[36m (66.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004347f70 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28405-sftys5>>}
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (3.2ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.6ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:10:10', '2017-04-04 09:10:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (42.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:10:10', '2017-04-04 09:10:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:10:10', '2017-04-04 09:10:10')[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (44.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:10:10', '2017-04-04 09:10:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:10:10', '2017-04-04 09:10:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (44.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:10:10', '2017-04-04 09:10:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (51.8ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:10:10', '2017-04-04 09:10:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:10:10', '2017-04-04 09:10:10')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (53.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:10:10', '2017-04-04 09:10:10')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:10:10', '2017-04-04 09:10:10')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (10.9ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (4.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (12.0ms)
Completed 200 OK in 239ms (Views: 232.8ms | ActiveRecord: 6.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
  [1m[35m (55.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006da06a0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28436-rcylzc>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (98, 121, 2, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (121, 97, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (99, 122, 5, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (122, 98, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (100, 123, 1, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (123, 99, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (98, 123, 4, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (123, 99, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.9ms)
Completed 200 OK in 135ms (Views: 15.7ms | ActiveRecord: 42.9ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (91.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000503bb00 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28436-si8leg>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (101, 124, 2, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (124, 100, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (102, 125, 5, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (125, 101, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (103, 126, 1, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (126, 102, '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (101, 126, 4, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (126, 102, '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 71ms (Views: 4.8ms | ActiveRecord: 16.5ms)
  [1m[36m (70.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000003b1a320 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28436-k29vka>>}
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.7ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (49.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (78.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:10:42', '2017-04-04 09:10:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:10:42', '2017-04-04 09:10:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (45.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:10:43', '2017-04-04 09:10:43')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (52.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:10:43', '2017-04-04 09:10:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:10:43', '2017-04-04 09:10:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (51.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:10:43', '2017-04-04 09:10:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (52.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:10:43', '2017-04-04 09:10:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (5.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (11.5ms)
Completed 200 OK in 224ms (Views: 217.0ms | ActiveRecord: 7.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.3ms)
  [1m[35m (52.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000008671af8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28467-3ekbqe>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (106, 131, 2, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (131, 105, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (107, 132, 5, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (132, 106, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (108, 133, 1, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (1.1ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (133, 107, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (106, 133, 4, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (133, 107, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.3ms)
Completed 200 OK in 215ms (Views: 15.9ms | ActiveRecord: 120.1ms)
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (334.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000068cc4d0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28467-18tbbap>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (109, 134, 2, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (134, 108, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (110, 135, 5, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (135, 109, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (111, 136, 1, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (136, 110, '2017-04-04 09:12:17', '2017-04-04 09:12:17')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (109, 136, 4, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (136, 110, '2017-04-04 09:12:17', '2017-04-04 09:12:17')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (3.4ms)
Completed 200 OK in 81ms (Views: 7.7ms | ActiveRecord: 22.7ms)
  [1m[36m (104.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:12:18', '2017-04-04 09:12:18')[0m
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (55.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:12:18', '2017-04-04 09:12:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:12:18', '2017-04-04 09:12:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (56.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:12:18', '2017-04-04 09:12:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (52.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (1.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:12:18', '2017-04-04 09:12:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (54.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:12:18', '2017-04-04 09:12:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (49.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:12:18', '2017-04-04 09:12:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:12:18', '2017-04-04 09:12:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (52.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:12:18', '2017-04-04 09:12:18')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:12:18', '2017-04-04 09:12:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (57.0ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (19.0ms)
Completed 200 OK in 240ms (Views: 225.6ms | ActiveRecord: 14.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.4ms)
  [1m[35m (57.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000076a3b80 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28496-6xg79>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.7ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (114, 141, 2, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (141, 113, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (115, 142, 5, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (142, 114, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (116, 143, 1, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (143, 115, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (114, 143, 4, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (143, 115, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.9ms)
Completed 200 OK in 114ms (Views: 15.7ms | ActiveRecord: 22.4ms)
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (79.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000593abc0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28496-8wa5l8>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (117, 144, 2, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (144, 116, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (118, 145, 5, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (145, 117, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (119, 146, 1, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (146, 118, '2017-04-04 09:12:47', '2017-04-04 09:12:47')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (117, 146, 4, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (146, 118, '2017-04-04 09:12:47', '2017-04-04 09:12:47')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 75ms (Views: 4.6ms | ActiveRecord: 20.5ms)
  [1m[36m (79.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004404508 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28496-166epfj>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000417a328 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28496-1aidtay>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (1.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:12:48', '2017-04-04 09:12:48')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (47.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:12:48', '2017-04-04 09:12:48')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:12:48', '2017-04-04 09:12:48')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (45.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.1ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:12:48', '2017-04-04 09:12:48')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:12:48', '2017-04-04 09:12:48')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (56.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:12:48', '2017-04-04 09:12:48')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.6ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (52.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:12:48', '2017-04-04 09:12:48')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:12:48', '2017-04-04 09:12:48')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (52.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:12:48', '2017-04-04 09:12:48')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:12:48', '2017-04-04 09:12:48')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (54.5ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (13.1ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (26.2ms)
Completed 200 OK in 239ms (Views: 216.9ms | ActiveRecord: 21.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (61.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000814d6d0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28517-16pzs5r>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (122, 151, 2, '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (151, 121, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (123, 152, 5, '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (152, 122, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (124, 153, 1, '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (153, 123, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (122, 153, 4, '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (153, 123, '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.1ms)
Completed 200 OK in 208ms (Views: 15.8ms | ActiveRecord: 118.9ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.7ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (85.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000637afe0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28517-q3845s>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (125, 154, 2, '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (154, 124, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (126, 155, 5, '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (155, 125, '2017-04-04 09:13:29', '2017-04-04 09:13:29')
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:13:29', '2017-04-04 09:13:29')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:13:30', '2017-04-04 09:13:30')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (127, 156, 1, '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (156, 126, '2017-04-04 09:13:30', '2017-04-04 09:13:30')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (125, 156, 4, '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (156, 126, '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 73ms (Views: 4.8ms | ActiveRecord: 20.7ms)
  [1m[36m (45.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004e5cdc0 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28517-17r92og>>}
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.1ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004bd0bb0 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28517-1te3qra>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.9ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (46.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:13:30', '2017-04-04 09:13:30')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (51.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (41.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (2.1ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:13:30', '2017-04-04 09:13:30')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (52.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (2.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (50.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:13:30', '2017-04-04 09:13:30')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (52.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.2ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:13:30', '2017-04-04 09:13:30')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (49.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:13:30', '2017-04-04 09:13:30')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (45.6ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 221ms (Views: 219.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[35m (52.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000007794f58 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28739-4pzwzy>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (130, 161, 2, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (161, 129, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (131, 162, 5, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (162, 130, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (132, 163, 1, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (163, 131, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (130, 163, 4, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.6ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (163, 131, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.4ms)
Completed 200 OK in 234ms (Views: 15.9ms | ActiveRecord: 143.1ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (105.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000059e67e0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28739-sbpgsv>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (133, 164, 2, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (164, 132, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.9ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (1.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (134, 165, 5, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (1.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (165, 133, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (135, 166, 1, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (166, 134, '2017-04-04 09:19:36', '2017-04-04 09:19:36')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (133, 166, 4, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (166, 134, '2017-04-04 09:19:36', '2017-04-04 09:19:36')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (3.0ms)
Completed 200 OK in 75ms (Views: 4.8ms | ActiveRecord: 19.9ms)
  [1m[36m (66.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000044e6200 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28739-iamxui>>}
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000426d078 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28739-jrj3w9>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#overview as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT `purchasers`.* FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT `items`.* FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `merchants`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT `merchants`.* FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchases`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `purchases`
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT `purchases`.* FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `sales`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `sales`[0m
  [1m[35mSale Load (0.1ms)[0m  SELECT `sales`.* FROM `sales`
  Rendered uploads/overview.html.erb within layouts/application (9.9ms)
Completed 200 OK in 15ms (Views: 11.5ms | ActiveRecord: 2.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:19:37', '2017-04-04 09:19:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (40.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:19:37', '2017-04-04 09:19:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:19:37', '2017-04-04 09:19:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:19:37', '2017-04-04 09:19:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (41.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (1.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.9ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:19:37', '2017-04-04 09:19:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (44.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:19:37', '2017-04-04 09:19:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (52.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:19:37', '2017-04-04 09:19:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:19:37', '2017-04-04 09:19:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (50.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:19:37', '2017-04-04 09:19:37')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (1.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (67.8ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:19:37', '2017-04-04 09:19:37')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (19.7ms)
Completed 200 OK in 236ms (Views: 234.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (21.8ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[35m (59.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000780d6d8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28760-pb456b>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (138, 171, 2, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (171, 137, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (139, 172, 5, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (172, 138, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (140, 173, 1, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (2.1ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (173, 139, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.8ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (138, 173, 4, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (173, 139, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.6ms)
Completed 200 OK in 209ms (Views: 15.3ms | ActiveRecord: 120.4ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (74.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005cd41a0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28760-4hmyl1>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.9ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (141, 174, 2, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.9ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (174, 140, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (142, 175, 5, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (175, 141, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (143, 176, 1, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (176, 142, '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (141, 176, 4, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (176, 142, '2017-04-04 09:20:12', '2017-04-04 09:20:12')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 81ms (Views: 4.5ms | ActiveRecord: 25.0ms)
  [1m[36m (49.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004879188 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28760-1tbykur>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.1ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004685660 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28760-1cweqje>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#overview as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT `purchasers`.* FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `items`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36mItem Load (1.0ms)[0m  [1mSELECT `items`.* FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `merchants`
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35mMerchant Load (0.3ms)[0m  SELECT `merchants`.* FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchases`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `purchases`
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT `purchases`.* FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `sales`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `sales`[0m
  [1m[35mSale Load (0.1ms)[0m  SELECT `sales`.* FROM `sales`
  Rendered uploads/overview.html.erb within layouts/application (11.3ms)
Completed 200 OK in 16ms (Views: 11.5ms | ActiveRecord: 3.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:20:12', '2017-04-04 09:20:12')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (47.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:20:13', '2017-04-04 09:20:13')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:20:13', '2017-04-04 09:20:13')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:20:13', '2017-04-04 09:20:13')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (52.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:20:13', '2017-04-04 09:20:13')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (55.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:20:13', '2017-04-04 09:20:13')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (46.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:20:13', '2017-04-04 09:20:13')[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:20:13', '2017-04-04 09:20:13')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (51.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:20:13', '2017-04-04 09:20:13')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:20:13', '2017-04-04 09:20:13')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.0ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 219ms (Views: 217.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (48.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000063bf730 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28795-13n50ir>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (146, 181, 2, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (181, 145, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (147, 182, 5, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (182, 146, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (148, 183, 1, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (183, 147, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (146, 183, 4, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (1.1ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (183, 147, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.2ms)
Completed 200 OK in 210ms (Views: 16.0ms | ActiveRecord: 120.9ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (73.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005dbb870 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28795-omigbd>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (149, 184, 2, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (184, 148, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.8ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (150, 185, 5, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (185, 149, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (151, 186, 1, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (186, 150, '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (149, 186, 4, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (186, 150, '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 71ms (Views: 4.4ms | ActiveRecord: 18.0ms)
  [1m[36m (116.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004881b58 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28795-5tfrp2>>}
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000461ce80 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28795-q321ht>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#overview as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT `purchasers`.* FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT `items`.* FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `merchants`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT `merchants`.* FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchases`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `purchases`
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT `purchases`.* FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `sales`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `sales`[0m
  [1m[35mSale Load (0.1ms)[0m  SELECT `sales`.* FROM `sales`
  Rendered uploads/overview.html.erb within layouts/application (9.7ms)
Completed 200 OK in 13ms (Views: 10.4ms | ActiveRecord: 2.6ms)
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (48.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:21:19', '2017-04-04 09:21:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (58.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:21:19', '2017-04-04 09:21:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (2.1ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (106.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:21:20', '2017-04-04 09:21:20')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:21:20', '2017-04-04 09:21:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (51.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:21:20', '2017-04-04 09:21:20')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (58.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:21:20', '2017-04-04 09:21:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (5.7ms)
Completed 200 OK in 226ms (Views: 225.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:23:20', '2017-04-04 09:23:20')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.3ms)
  [1m[35m (57.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006d950e8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28887-1kfrmz3>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:23:20', '2017-04-04 09:23:20')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (4.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (154, 191, 2, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (191, 153, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (155, 192, 5, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (192, 154, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (156, 193, 1, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (193, 155, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (154, 193, 4, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (193, 155, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.4ms)
Completed 200 OK in 239ms (Views: 16.0ms | ActiveRecord: 143.6ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (3.4ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (225.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006791930 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-28887-1lnhf42>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (157, 194, 2, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (194, 156, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (158, 195, 5, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (195, 157, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (159, 196, 1, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (196, 158, '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (157, 196, 4, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (196, 158, '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.7ms)
Completed 200 OK in 80ms (Views: 4.8ms | ActiveRecord: 20.1ms)
  [1m[36m (112.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005268108 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28887-1bawnim>>}
  [1m[36m (2.6ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (3.3ms)
Completed 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 3.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004fda198 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-28887-dppa8s>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#overview as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT `purchasers`.* FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT `items`.* FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `merchants`
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT `merchants`.* FROM `merchants`
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `purchases`
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT `purchases`.* FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `sales`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `sales`[0m
  [1m[35mSale Load (0.2ms)[0m  SELECT `sales`.* FROM `sales`
  Rendered uploads/overview.html.erb within layouts/application (10.5ms)
Completed 200 OK in 14ms (Views: 10.4ms | ActiveRecord: 3.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (53.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (1.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (48.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (1.9ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:23:21', '2017-04-04 09:23:21')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (46.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:23:21', '2017-04-04 09:23:21')
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:23:22', '2017-04-04 09:23:22')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:23:22', '2017-04-04 09:23:22')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (51.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:23:22', '2017-04-04 09:23:22')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:23:22', '2017-04-04 09:23:22')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (11.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (18.1ms)
Completed 200 OK in 254ms (Views: 252.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 09:28:18', '2017-04-04 09:28:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.7ms)
  [1m[35m (53.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000007a5dc58 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-29116-2csi3g>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:28:18', '2017-04-04 09:28:18')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:28:18', '2017-04-04 09:28:18')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (162, 201, 2, '2017-04-04 09:28:18', '2017-04-04 09:28:18')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (201, 161, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (163, 202, 5, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (202, 162, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.5ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (164, 203, 1, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (203, 163, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (162, 203, 4, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (203, 163, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (14.1ms)
Completed 200 OK in 202ms (Views: 17.1ms | ActiveRecord: 106.7ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (81.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000005df11f0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-29116-s5bjii>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (165, 204, 2, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (2.0ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (204, 164, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (1.1ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (166, 205, 5, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (205, 165, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (167, 206, 1, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (206, 166, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (165, 206, 4, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (206, 166, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.8ms)
Completed 200 OK in 79ms (Views: 5.2ms | ActiveRecord: 21.5ms)
  [1m[36m (95.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000048b6c18 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-29116-1at1dp9>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004626958 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-29116-11x8s1b>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.7ms)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (1.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
Processing by UploadsController#overview as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT `purchasers`.* FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `items`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT `items`.* FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `merchants`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT `merchants`.* FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `purchases`
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT `purchases`.* FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `sales`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `sales`[0m
  [1m[35mSale Load (0.2ms)[0m  SELECT `sales`.* FROM `sales`
  Rendered uploads/overview.html.erb within layouts/application (10.1ms)
Completed 200 OK in 15ms (Views: 11.4ms | ActiveRecord: 2.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (44.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (1.1ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (55.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (1.1ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (51.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 09:28:19', '2017-04-04 09:28:19')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (57.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 09:28:19', '2017-04-04 09:28:19')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (44.0ms)[0m  [1mROLLBACK[0m
  [1m[36m (265.7ms)[0m  [1mDROP DATABASE IF EXISTS `codechallenge_test`[0m
  [1m[35m (0.4ms)[0m  CREATE DATABASE `codechallenge_test` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`
  [1m[36m (388.5ms)[0m  [1mCREATE TABLE `items` (`id` int(11) auto_increment PRIMARY KEY, `description` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `price` decimal(8,2)) ENGINE=InnoDB[0m
  [1m[35m (481.3ms)[0m  CREATE TABLE `merchants` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (445.8ms)[0m  [1mCREATE TABLE `purchasers` (`id` int(11) auto_increment PRIMARY KEY, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (648.4ms)[0m  CREATE TABLE `purchases` (`id` int(11) auto_increment PRIMARY KEY, `purchaser_id` int(11), `item_id` int(11), `quantity` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (345.8ms)[0m  [1mCREATE TABLE `sales` (`id` int(11) auto_increment PRIMARY KEY, `merchant_id` int(11), `item_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (500.7ms)[0m  CREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB
  [1m[36m (690.0ms)[0m  [1mCREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) [0m
  [1m[35m (0.3ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (99.2ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402034517')[0m
  [1m[35m (64.7ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402034424')
  [1m[36m (100.8ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402031035')[0m
  [1m[35m (79.0ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170401055803')
  [1m[36m (44.5ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170401061100')[0m
  [1m[35m (89.1ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20170402031604')
  [1m[36m (400.2ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20170402033651')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (20.3ms)
Completed 200 OK in 493ms (Views: 476.8ms | ActiveRecord: 16.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (24.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 16:52:42', '2017-04-04 16:52:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (9.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (11.0ms)
Completed 200 OK in 13ms (Views: 3.8ms | ActiveRecord: 9.3ms)
  [1m[35m (50.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000046d2de8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-1561-12kki8q>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 16:52:42', '2017-04-04 16:52:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (22.7ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 16:52:42', '2017-04-04 16:52:42')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 1, 2, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.5ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (1.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (3, 2, 5, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (2, 2, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (4, 3, 1, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (3, 3, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 3, 4, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (3, 3, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (50.7ms)
Completed 200 OK in 193ms (Views: 54.0ms | ActiveRecord: 61.5ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (101.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000007e01148 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-1561-8eyxfx>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (5, 4, 2, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (4, 4, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (6, 5, 5, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (5, 5, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (7, 6, 1, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (6, 6, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (5, 6, 4, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (6, 6, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.6ms)
Completed 200 OK in 75ms (Views: 5.3ms | ActiveRecord: 17.1ms)
  [1m[36m (43.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000072b0050 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-1561-1k1hkil>>}
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.7ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006c9ff80 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-1561-1ub24yn>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#overview as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT `purchasers`.* FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `items`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT `items`.* FROM `items`[0m
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM `merchants`
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT `merchants`.* FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchases`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `purchases`
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT `purchases`.* FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `sales`
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `sales`[0m
  [1m[35mSale Load (1.0ms)[0m  SELECT `sales`.* FROM `sales`
  Rendered uploads/overview.html.erb within layouts/application (13.1ms)
Completed 200 OK in 18ms (Views: 11.6ms | ActiveRecord: 5.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (51.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (44.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (77.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (21.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (80.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (65.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 16:52:43', '2017-04-04 16:52:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (48.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.6ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 16:52:43', '2017-04-04 16:52:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (49.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 16:52:44', '2017-04-04 16:52:44')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (12.9ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (5.4ms)
Completed 200 OK in 218ms (Views: 216.6ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (54.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000071bf5d8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-1635-bmz3nw>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (10, 11, 2, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (11, 9, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (11, 12, 5, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (12, 10, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (12, 13, 1, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (13, 11, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (10, 13, 4, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (13, 11, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (27.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.8ms)
Completed 200 OK in 249ms (Views: 15.5ms | ActiveRecord: 155.6ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (301.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000053d43e8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-1635-1xf48dv>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (13, 14, 2, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.4ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (14, 12, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (14, 15, 5, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (15, 13, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (15, 16, 1, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (16, 14, '2017-04-04 16:53:56', '2017-04-04 16:53:56')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (13, 16, 4, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (16, 14, '2017-04-04 16:53:56', '2017-04-04 16:53:56')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.7ms)
Completed 200 OK in 75ms (Views: 4.6ms | ActiveRecord: 18.6ms)
  [1m[36m (133.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000003e6d018 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-1635-43ul0v>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.1ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000003c11be8 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-1635-1rfwrzt>>}
  [1m[36m (2.6ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 8ms (Views: 4.5ms | ActiveRecord: 2.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#overview as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT `purchasers`.* FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT `items`.* FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT `merchants`.* FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchases`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `purchases`
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT `purchases`.* FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `sales`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `sales`[0m
  [1m[35mSale Load (0.1ms)[0m  SELECT `sales`.* FROM `sales`
  Rendered uploads/overview.html.erb within layouts/application (9.7ms)
Completed 200 OK in 14ms (Views: 10.5ms | ActiveRecord: 2.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 16:53:57', '2017-04-04 16:53:57')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (45.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 16:53:57', '2017-04-04 16:53:57')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 16:53:57', '2017-04-04 16:53:57')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 16:53:57', '2017-04-04 16:53:57')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (52.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.7ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 16:53:57', '2017-04-04 16:53:57')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (46.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 16:53:57', '2017-04-04 16:53:57')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (96.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 16:53:57', '2017-04-04 16:53:57')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 16:53:57', '2017-04-04 16:53:57')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (50.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 16:53:57', '2017-04-04 16:53:57')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (46.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 16:53:57', '2017-04-04 16:53:57')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (54.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (22.9ms)
Completed 200 OK in 251ms (Views: 232.8ms | ActiveRecord: 17.5ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[35m (77.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006d1e560 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-2513-v5z36q>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 17:11:42', '2017-04-04 17:11:42')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (18, 21, 2, '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (21, 17, '2017-04-04 17:11:42', '2017-04-04 17:11:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 17:11:42', '2017-04-04 17:11:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (19, 22, 5, '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (22, 18, '2017-04-04 17:11:42', '2017-04-04 17:11:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 17:11:42', '2017-04-04 17:11:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (20, 23, 1, '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (23, 19, '2017-04-04 17:11:42', '2017-04-04 17:11:42')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (18, 23, 4, '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (23, 19, '2017-04-04 17:11:42', '2017-04-04 17:11:42')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (12.9ms)
Completed 200 OK in 222ms (Views: 15.9ms | ActiveRecord: 129.2ms)
  [1m[36mPurchaser Load (0.4ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (161.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000004f4ac00 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-2513-1lnq6no>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (21, 24, 2, '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (24, 20, '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (22, 25, 5, '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.5ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (25, 21, '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (23, 26, 1, '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (26, 22, '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (21, 26, 4, '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (26, 22, '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.4ms)
Completed 200 OK in 71ms (Views: 4.7ms | ActiveRecord: 16.9ms)
  [1m[36m (126.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000003a144a8 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-2513-19mxhcz>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.1ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000379d490 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-2513-1rptltf>>}
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.2ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#overview as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT `purchasers`.* FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT `items`.* FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `merchants`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT `merchants`.* FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchases`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `purchases`
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT `purchases`.* FROM `purchases`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `sales`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `sales`[0m
  [1m[35mSale Load (0.1ms)[0m  SELECT `sales`.* FROM `sales`
  Rendered uploads/overview.html.erb within layouts/application (10.2ms)
Completed 200 OK in 15ms (Views: 10.9ms | ActiveRecord: 2.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (1.5ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (50.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.4ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.8ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (57.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (50.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (52.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 17:11:43', '2017-04-04 17:11:43')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (57.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 17:11:43', '2017-04-04 17:11:43')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.7ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (11.6ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (6.2ms)
Completed 200 OK in 250ms (Views: 247.5ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#index as HTML
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Otto Kaufmann' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Otto Kaufmann', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by UploadsController#index as HTML
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  Rendered uploads/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[35m (42.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x0000000887d1f8 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-3511-lfcj2e>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.8ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.4ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (26, 31, 2, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (31, 25, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (27, 32, 5, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (32, 26, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (28, 33, 1, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (33, 27, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (26, 33, 4, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (33, 27, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (13.3ms)
Completed 200 OK in 214ms (Views: 16.1ms | ActiveRecord: 121.0ms)
  [1m[36mPurchaser Load (0.3ms)[0m  [1mSELECT  `purchasers`.* FROM `purchasers`  ORDER BY `purchasers`.`id` ASC LIMIT 1[0m
  [1m[35mItem Load (0.3ms)[0m  SELECT  `items`.* FROM `items`  ORDER BY `items`.`id` ASC LIMIT 1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants`  ORDER BY `merchants`.`id` ASC LIMIT 1[0m
  [1m[35m (80.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x00000006a9b6d0 @content_type="text/csv", @original_filename="example_data.csv", @tempfile=#<Tempfile:/tmp/example_data.csv20170404-3511-14qh60k>>}
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Snake Plissken' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Snake Plissken', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$10 off $20 of food' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$10 off $20 of food', 10.0, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (29, 34, 2, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Bob\'s Pizza' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '987 Fake St' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Bob\'s Pizza', '987 Fake St', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (34, 28, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.2ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Amy Pond' LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Amy Pond', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$30 of awesome for $10' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$30 of awesome for $10', 10.0, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (30, 35, 5, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.2ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY '\'Tom\'s Awesome Shop\'' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '456 Unreal Rd' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('\'Tom\'s Awesome Shop\'', '456 Unreal Rd', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (35, 29, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.4ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'Marty McFly' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('Marty McFly', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`description`, `price`, `created_at`, `updated_at`) VALUES ('$20 Sneakers for $5', 5.0, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (31, 36, 1, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '123 Fake St' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('Sneaker Store Emporium', '123 Fake St', '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (36, 30, '2017-04-04 17:37:58', '2017-04-04 17:37:58')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT  `purchasers`.* FROM `purchasers` WHERE `purchasers`.`name` = 'Snake Plissken' LIMIT 1
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT  `items`.* FROM `items` WHERE `items`.`description` = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (29, 36, 4, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.3ms)[0m  [1mSELECT  `merchants`.* FROM `merchants` WHERE `merchants`.`name` = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (36, 30, '2017-04-04 17:37:58', '2017-04-04 17:37:58')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 72ms (Views: 4.5ms | ActiveRecord: 19.6ms)
  [1m[36m (124.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000055498b8 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-3511-x3wf47>>}
  [1m[36m (0.5ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (2.9ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (5.1ms)
Completed 200 OK in 9ms (Views: 5.1ms | ActiveRecord: 3.4ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by UploadsController#upload as HTML
  Parameters: {"csvfile"=>#<Rack::Test::UploadedFile:0x000000052e8420 @content_type="text/csv", @original_filename="bad_example_data.csv", @tempfile=#<Tempfile:/tmp/bad_example_data.csv20170404-3511-1185dta>>}
  [1m[36m (0.6ms)[0m  [1mSELECT SUM(t.charge) AS total_charge FROM (SELECT p.quantity * i.price AS charge FROM purchases p, items i WHERE p.item_id = i.id) t;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  Rendered uploads/upload_result.html.erb within layouts/application (2.3ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by UploadsController#overview as HTML
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchasers`[0m
  [1m[35mPurchaser Load (0.3ms)[0m  SELECT `purchasers`.* FROM `purchasers`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `items`
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT `items`.* FROM `items`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `merchants`[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT `merchants`.* FROM `merchants`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `purchases`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `purchases`
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT `purchases`.* FROM `purchases`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `sales`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `sales`[0m
  [1m[35mSale Load (0.1ms)[0m  SELECT `sales`.* FROM `sales`
  Rendered uploads/overview.html.erb within layouts/application (9.3ms)
Completed 200 OK in 14ms (Views: 10.2ms | ActiveRecord: 2.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Nintendo Entertainment System' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (245.99, 'Samsung TV', '2017-04-04 17:37:59', '2017-04-04 17:37:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Samsung TV' LIMIT 1
  [1m[36m (49.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Super Nintendo' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Super Nintendo', '2017-04-04 17:37:59', '2017-04-04 17:37:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.2ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Sega Genesis' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Sega Genesis', '2017-04-04 17:37:59', '2017-04-04 17:37:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (45.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mItem Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mItem Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `items` (`price`, `description`, `created_at`, `updated_at`) VALUES (199.99, 'Intellivision', '2017-04-04 17:37:59', '2017-04-04 17:37:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mItem Exists (0.3ms)[0m  SELECT  1 AS one FROM `items` WHERE `items`.`description` = BINARY 'Intellivision' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (52.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` IS NULL LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '714 Evergreen Terrace' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'John Doe' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mMerchant Exists (0.4ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 17:37:59', '2017-04-04 17:37:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (57.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.2ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '200 Market Street' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `merchants` (`name`, `address`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '200 Market Street', '2017-04-04 17:37:59', '2017-04-04 17:37:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36mMerchant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mMerchant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM `merchants` WHERE `merchants`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mMerchant Exists (0.3ms)[0m  SELECT  1 AS one FROM `merchants` WHERE `merchants`.`address` = BINARY '1200 Vista Ave.' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (53.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 17:37:59', '2017-04-04 17:37:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `purchases` (`purchaser_id`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 4, '2017-04-04 17:37:59', '2017-04-04 17:37:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (52.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPurchaser Exists (0.4ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPurchaser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mPurchaser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `purchasers` (`name`, `created_at`, `updated_at`) VALUES ('ÊùæÊ©ãÊòéË£ïÂ≠ê', '2017-04-04 17:37:59', '2017-04-04 17:37:59')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.5ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mPurchaser Exists (0.3ms)[0m  SELECT  1 AS one FROM `purchasers` WHERE `purchasers`.`name` = BINARY 'ÊùæÊ©ãÊòéË£ïÂ≠ê' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (57.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `sales` (`item_id`, `merchant_id`, `created_at`, `updated_at`) VALUES (1, 1, '2017-04-04 17:37:59', '2017-04-04 17:37:59')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (56.8ms)[0m  [1mROLLBACK[0m
